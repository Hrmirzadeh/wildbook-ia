{"parents": [{"link": "../../../", "title": "Module code"}, {"link": "../../", "title": "ibeis"}, {"link": "../", "title": "ibeis.control"}], "title": "ibeis.control.STAGING_SCHEMA_CURRENT", "body": "<h1>Source code for ibeis.control.STAGING_SCHEMA_CURRENT</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">AUTOGENERATED ON 15:48:06 2018/04/17</span>\n<span class=\"sd\">AutogenCommandLine:</span>\n<span class=\"sd\">    python -m ibeis.control.STAGING_SCHEMA --test-autogen_staging_schema --force-incremental-db-update --write</span>\n<span class=\"sd\">    python -m ibeis.control.STAGING_SCHEMA --test-autogen_staging_schema --force-incremental-db-update --diff=1</span>\n<span class=\"sd\">    python -m ibeis.control.STAGING_SCHEMA --test-autogen_staging_schema --force-incremental-db-update</span>\n<span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"c1\"># -*- coding: utf-8 -*-</span>\n<span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"k\">import</span> <span class=\"n\">absolute_import</span><span class=\"p\">,</span> <span class=\"n\">division</span><span class=\"p\">,</span> <span class=\"n\">print_function</span><span class=\"p\">,</span> <span class=\"n\">unicode_literals</span>\n\n\n<span class=\"c1\"># =======================</span>\n<span class=\"c1\"># Schema Version Current</span>\n<span class=\"c1\"># =======================</span>\n\n\n<span class=\"n\">VERSION_CURRENT</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;1.1.0&#39;</span>\n\n\n<div class=\"viewcode-block\" id=\"update_current\"><a class=\"viewcode-back\" href=\"../../../../ibeis.control/#ibeis.control.STAGING_SCHEMA_CURRENT.update_current\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">update_current</span><span class=\"p\">(</span><span class=\"n\">db</span><span class=\"p\">,</span> <span class=\"n\">ibs</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">add_table</span><span class=\"p\">(</span><span class=\"s1\">&#39;metadata&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;metadata_rowid&#39;</span><span class=\"p\">,</span>               <span class=\"s1\">&#39;INTEGER PRIMARY KEY&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;metadata_key&#39;</span><span class=\"p\">,</span>                 <span class=\"s1\">&#39;TEXT&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;metadata_value&#39;</span><span class=\"p\">,</span>               <span class=\"s1\">&#39;TEXT&#39;</span><span class=\"p\">),</span>\n    <span class=\"p\">],</span>\n        <span class=\"n\">docstr</span><span class=\"o\">=</span><span class=\"s1\">&#39;&#39;&#39;</span>\n<span class=\"s1\">        The table that stores permanently all of the metadata about the</span>\n<span class=\"s1\">        database (tables, etc)</span>\n<span class=\"s1\">        &#39;&#39;&#39;</span><span class=\"p\">,</span>\n        <span class=\"n\">superkeys</span><span class=\"o\">=</span><span class=\"p\">[(</span><span class=\"s1\">&#39;metadata_key&#39;</span><span class=\"p\">,)],</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">add_table</span><span class=\"p\">(</span><span class=\"s1\">&#39;reviews&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_rowid&#39;</span><span class=\"p\">,</span>                 <span class=\"s1\">&#39;INTEGER PRIMARY KEY&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_uuid&#39;</span><span class=\"p\">,</span>                  <span class=\"s1\">&#39;UUID NOT NULL&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;annot_1_rowid&#39;</span><span class=\"p\">,</span>                <span class=\"s1\">&#39;INTEGER NOT NULL&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;annot_2_rowid&#39;</span><span class=\"p\">,</span>                <span class=\"s1\">&#39;INTEGER NOT NULL&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_count&#39;</span><span class=\"p\">,</span>                 <span class=\"s1\">&#39;INTEGER NOT NULL&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_evidence_decision&#39;</span><span class=\"p\">,</span>     <span class=\"s1\">&#39;INTEGER&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_server_end_time_posix&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;INTEGER&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_user_identity&#39;</span><span class=\"p\">,</span>         <span class=\"s1\">&#39;TEXT&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_tags&#39;</span><span class=\"p\">,</span>                  <span class=\"s1\">&#39;TEXT&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_user_confidence&#39;</span><span class=\"p\">,</span>       <span class=\"s1\">&#39;INTEGER&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_client_start_time_posix&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;INTEGER&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_client_end_time_posix&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;INTEGER&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_server_start_time_posix&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;INTEGER&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;review_meta_decision&#39;</span><span class=\"p\">,</span>         <span class=\"s1\">&#39;INTEGER&#39;</span><span class=\"p\">),</span>\n    <span class=\"p\">],</span>\n        <span class=\"n\">docstr</span><span class=\"o\">=</span><span class=\"s1\">&#39;&#39;&#39;</span>\n<span class=\"s1\">        Used to store completed user review states of two matched annotations</span>\n<span class=\"s1\">        &#39;&#39;&#39;</span><span class=\"p\">,</span>\n        <span class=\"n\">superkeys</span><span class=\"o\">=</span><span class=\"p\">[(</span><span class=\"s1\">&#39;annot_1_rowid&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;annot_2_rowid&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;review_count&#39;</span><span class=\"p\">)],</span>\n    <span class=\"p\">)</span>\n\n    <span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">add_table</span><span class=\"p\">(</span><span class=\"s1\">&#39;tests&#39;</span><span class=\"p\">,</span> <span class=\"p\">[</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;test_rowid&#39;</span><span class=\"p\">,</span>                   <span class=\"s1\">&#39;INTEGER PRIMARY KEY&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;test_uuid&#39;</span><span class=\"p\">,</span>                    <span class=\"s1\">&#39;UUID&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;test_user_identity&#39;</span><span class=\"p\">,</span>           <span class=\"s1\">&#39;TEXT&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;test_challenge_json&#39;</span><span class=\"p\">,</span>          <span class=\"s1\">&#39;TEXT&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;test_response_json&#39;</span><span class=\"p\">,</span>           <span class=\"s1\">&#39;TEXT&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;test_result&#39;</span><span class=\"p\">,</span>                  <span class=\"s1\">&#39;INTEGER&#39;</span><span class=\"p\">),</span>\n        <span class=\"p\">(</span><span class=\"s1\">&#39;test_time_posix&#39;</span><span class=\"p\">,</span>              <span class=\"s2\">&quot;INTEGER DEFAULT (CAST(STRFTIME(&#39;</span><span class=\"si\">%s</span><span class=\"s2\">&#39;, &#39;NOW&#39;, &#39;UTC&#39;) AS INTEGER))&quot;</span><span class=\"p\">),</span>\n    <span class=\"p\">],</span>\n        <span class=\"n\">docstr</span><span class=\"o\">=</span><span class=\"s1\">&#39;&#39;&#39;</span>\n<span class=\"s1\">        Used to store tests given to the user, their responses, and their</span>\n<span class=\"s1\">        results</span>\n<span class=\"s1\">        &#39;&#39;&#39;</span><span class=\"p\">,</span>\n        <span class=\"n\">superkeys</span><span class=\"o\">=</span><span class=\"p\">[(</span><span class=\"s1\">&#39;test_uuid&#39;</span><span class=\"p\">,)],</span>\n    <span class=\"p\">)</span></div>\n</pre></div>", "current_page_name": "_modules/ibeis/control/STAGING_SCHEMA_CURRENT", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}