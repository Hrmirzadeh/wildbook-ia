{"parents": [{"link": "../../../", "title": "Module code"}, {"link": "../../", "title": "ibeis"}, {"link": "../", "title": "ibeis.control"}], "title": "ibeis.control._autogen_party_funcs", "body": "<h1>Source code for ibeis.control._autogen_party_funcs</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"c1\"># -*- coding: utf-8 -*-</span>\n<span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">Autogenerated IBEISController functions</span>\n\n<span class=\"sd\">TemplateInfo:</span>\n<span class=\"sd\">    autogen_time = 15:14:53 2015/03/11</span>\n<span class=\"sd\">    autogen_key = party</span>\n\n<span class=\"sd\">ToRegenerate:</span>\n<span class=\"sd\">    python -m ibeis.templates.template_generator --key party --Tcfg with_api_cache=False with_web_api=False with_deleters=False --diff</span>\n<span class=\"sd\">    python -m ibeis.templates.template_generator --key party --Tcfg with_api_cache=False with_web_api=False with_deleters=False --write</span>\n<span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"k\">import</span> <span class=\"n\">absolute_import</span><span class=\"p\">,</span> <span class=\"n\">division</span><span class=\"p\">,</span> <span class=\"n\">print_function</span>\n<span class=\"kn\">import</span> <span class=\"nn\">functools</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"kn\">import</span> <span class=\"nn\">six</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"kn\">from</span> <span class=\"nn\">six.moves</span> <span class=\"k\">import</span> <span class=\"nb\">map</span><span class=\"p\">,</span> <span class=\"nb\">range</span><span class=\"p\">,</span> <span class=\"nb\">zip</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"kn\">from</span> <span class=\"nn\">ibeis</span> <span class=\"k\">import</span> <span class=\"n\">constants</span> <span class=\"k\">as</span> <span class=\"n\">const</span>\n<span class=\"kn\">import</span> <span class=\"nn\">utool</span> <span class=\"k\">as</span> <span class=\"nn\">ut</span>\n<span class=\"kn\">from</span> <span class=\"nn\">ibeis.control</span> <span class=\"k\">import</span> <span class=\"n\">controller_inject</span>\n<span class=\"kn\">from</span> <span class=\"nn\">ibeis.control</span> <span class=\"k\">import</span> <span class=\"n\">accessor_decors</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"nb\">print</span><span class=\"p\">,</span> <span class=\"n\">rrr</span><span class=\"p\">,</span> <span class=\"n\">profile</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">inject2</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n<span class=\"c1\"># Create dectorator to inject functions in this module into the IBEISController</span>\n<span class=\"n\">CLASS_INJECT_KEY</span><span class=\"p\">,</span> <span class=\"n\">register_ibs_method</span> <span class=\"o\">=</span> <span class=\"n\">controller_inject</span><span class=\"o\">.</span><span class=\"n\">make_ibs_register_decorator</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">register_api</span>   <span class=\"o\">=</span> <span class=\"n\">controller_inject</span><span class=\"o\">.</span><span class=\"n\">get_ibeis_flask_api</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">)</span>\n\n\n<div class=\"viewcode-block\" id=\"testdata_ibs\"><a class=\"viewcode-back\" href=\"../../../../ibeis.control/#ibeis.control._autogen_party_funcs.testdata_ibs\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">testdata_ibs</span><span class=\"p\">(</span><span class=\"n\">defaultdb</span><span class=\"o\">=</span><span class=\"s1\">&#39;testdb1&#39;</span><span class=\"p\">):</span>\n    <span class=\"sa\">r</span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Auto-docstr for &#39;testdata_ibs&#39;</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">ibeis</span>\n    <span class=\"n\">ibs</span> <span class=\"o\">=</span> <span class=\"n\">ibeis</span><span class=\"o\">.</span><span class=\"n\">opendb</span><span class=\"p\">(</span><span class=\"n\">defaultdb</span><span class=\"o\">=</span><span class=\"n\">defaultdb</span><span class=\"p\">)</span>\n    <span class=\"n\">qreq_</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n    <span class=\"k\">return</span> <span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">qreq_</span></div>\n\n<span class=\"c1\"># AUTOGENED CONSTANTS:</span>\n<span class=\"n\">PARTY_ROWID</span>      <span class=\"o\">=</span> <span class=\"s1\">&#39;party_rowid&#39;</span>\n<span class=\"n\">PARTY_TAG</span>        <span class=\"o\">=</span> <span class=\"s1\">&#39;party_tag&#39;</span>\n\n\n<span class=\"nd\">@register_ibs_method</span>\n<span class=\"k\">def</span> <span class=\"nf\">_get_all_party_rowids</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">):</span>\n    <span class=\"sa\">r</span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    all_party_rowids &lt;- party.get_all_rowids()</span>\n\n<span class=\"sd\">    Returns:</span>\n<span class=\"sd\">        list_ (list): unfiltered party_rowids</span>\n\n<span class=\"sd\">    TemplateInfo:</span>\n<span class=\"sd\">        Tider_all_rowids</span>\n<span class=\"sd\">        tbl = party</span>\n\n<span class=\"sd\">    Example:</span>\n<span class=\"sd\">        &gt;&gt;&gt; # ENABLE_DOCTEST</span>\n<span class=\"sd\">        &gt;&gt;&gt; from ibeis.control._autogen_party_funcs import *  # NOQA</span>\n<span class=\"sd\">        &gt;&gt;&gt; ibs, qreq_ = testdata_ibs()</span>\n<span class=\"sd\">        &gt;&gt;&gt; ibs._get_all_party_rowids()</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"n\">all_party_rowids</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">get_all_rowids</span><span class=\"p\">(</span><span class=\"n\">const</span><span class=\"o\">.</span><span class=\"n\">PARTY_TABLE</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">all_party_rowids</span>\n\n\n<div class=\"viewcode-block\" id=\"add_party\"><a class=\"viewcode-back\" href=\"../../../../ibeis.control/#ibeis.control._autogen_party_funcs.add_party\">[docs]</a><span class=\"nd\">@register_ibs_method</span>\n<span class=\"c1\"># @register_api(&#39;/api/autogen/&#39;, methods=[&#39;POST&#39;])</span>\n<span class=\"k\">def</span> <span class=\"nf\">add_party</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">party_tag_list</span><span class=\"p\">):</span>\n    <span class=\"sa\">r</span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Returns:</span>\n<span class=\"sd\">        returns party_rowid_list of added (or already existing partys)</span>\n\n<span class=\"sd\">    TemplateInfo:</span>\n<span class=\"sd\">        Tadder_native</span>\n<span class=\"sd\">        tbl = party</span>\n\n<span class=\"sd\">    RESTful:</span>\n<span class=\"sd\">        Method: POST</span>\n<span class=\"sd\">        URL:    /api/autogen/</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"c1\"># WORK IN PROGRESS</span>\n    <span class=\"n\">colnames</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">PARTY_TAG</span><span class=\"p\">,)</span>\n    <span class=\"n\">params_iter</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n        <span class=\"p\">(</span><span class=\"n\">party_tag</span><span class=\"p\">,)</span>\n        <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"n\">party_tag</span><span class=\"p\">,)</span> <span class=\"ow\">in</span>\n        <span class=\"nb\">zip</span><span class=\"p\">(</span><span class=\"n\">party_tag_list</span><span class=\"p\">)</span>\n    <span class=\"p\">)</span>\n    <span class=\"n\">get_rowid_from_superkey</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_party_rowid_from_superkey</span>\n    <span class=\"n\">party_rowid_list</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">add_cleanly</span><span class=\"p\">(</span>\n        <span class=\"n\">const</span><span class=\"o\">.</span><span class=\"n\">PARTY_TABLE</span><span class=\"p\">,</span> <span class=\"n\">colnames</span><span class=\"p\">,</span> <span class=\"n\">params_iter</span><span class=\"p\">,</span> <span class=\"n\">get_rowid_from_superkey</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">party_rowid_list</span></div>\n\n\n<div class=\"viewcode-block\" id=\"get_party_rowid_from_superkey\"><a class=\"viewcode-back\" href=\"../../../../ibeis.control/#ibeis.control._autogen_party_funcs.get_party_rowid_from_superkey\">[docs]</a><span class=\"nd\">@register_ibs_method</span>\n<span class=\"c1\"># @register_api(&#39;/api/autogen/party/rowid/superkey/&#39;, methods=[&#39;GET&#39;])</span>\n<span class=\"k\">def</span> <span class=\"nf\">get_party_rowid_from_superkey</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">party_tag_list</span><span class=\"p\">,</span> <span class=\"n\">eager</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">nInput</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"sa\">r</span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    party_rowid_list &lt;- party[party_tag_list]</span>\n\n<span class=\"sd\">    Args:</span>\n<span class=\"sd\">        superkey lists: party_tag_list</span>\n\n<span class=\"sd\">    Returns:</span>\n<span class=\"sd\">        party_rowid_list</span>\n\n<span class=\"sd\">    TemplateInfo:</span>\n<span class=\"sd\">        Tgetter_native_rowid_from_superkey</span>\n<span class=\"sd\">        tbl = party</span>\n\n<span class=\"sd\">    RESTful:</span>\n<span class=\"sd\">        Method: GET</span>\n<span class=\"sd\">        URL:    /api/autogen/party_rowid_from_superkey/</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"n\">colnames</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">PARTY_ROWID</span><span class=\"p\">,)</span>\n    <span class=\"c1\"># FIXME: col_rowid is not correct</span>\n    <span class=\"n\">params_iter</span> <span class=\"o\">=</span> <span class=\"nb\">zip</span><span class=\"p\">(</span><span class=\"n\">party_tag_list</span><span class=\"p\">)</span>\n    <span class=\"n\">andwhere_colnames</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">PARTY_TAG</span><span class=\"p\">,</span> <span class=\"p\">)</span>\n    <span class=\"n\">party_rowid_list</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">get_where_eq</span><span class=\"p\">(</span>\n        <span class=\"n\">const</span><span class=\"o\">.</span><span class=\"n\">PARTY_TABLE</span><span class=\"p\">,</span> <span class=\"n\">colnames</span><span class=\"p\">,</span> <span class=\"n\">params_iter</span><span class=\"p\">,</span> <span class=\"n\">andwhere_colnames</span><span class=\"p\">,</span> <span class=\"n\">eager</span><span class=\"o\">=</span><span class=\"n\">eager</span><span class=\"p\">,</span> <span class=\"n\">nInput</span><span class=\"o\">=</span><span class=\"n\">nInput</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">party_rowid_list</span></div>\n\n\n<div class=\"viewcode-block\" id=\"get_party_tag\"><a class=\"viewcode-back\" href=\"../../../../ibeis.control/#ibeis.control._autogen_party_funcs.get_party_tag\">[docs]</a><span class=\"nd\">@register_ibs_method</span>\n<span class=\"c1\"># @register_api(&#39;/api/autogen/party/tag/&#39;, methods=[&#39;GET&#39;])</span>\n<span class=\"k\">def</span> <span class=\"nf\">get_party_tag</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">party_rowid_list</span><span class=\"p\">,</span> <span class=\"n\">eager</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">nInput</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n    <span class=\"sa\">r</span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    party_tag_list &lt;- party.party_tag[party_rowid_list]</span>\n\n<span class=\"sd\">    gets data from the &quot;native&quot; column &quot;party_tag&quot; in the &quot;party&quot; table</span>\n\n<span class=\"sd\">    Args:</span>\n<span class=\"sd\">        party_rowid_list (list):</span>\n\n<span class=\"sd\">    Returns:</span>\n<span class=\"sd\">        list: party_tag_list</span>\n\n<span class=\"sd\">    TemplateInfo:</span>\n<span class=\"sd\">        Tgetter_table_column</span>\n<span class=\"sd\">        col = party_tag</span>\n<span class=\"sd\">        tbl = party</span>\n\n<span class=\"sd\">    RESTful:</span>\n<span class=\"sd\">        Method: GET</span>\n<span class=\"sd\">        URL:    /api/autogen/party/tag/</span>\n\n<span class=\"sd\">    Example:</span>\n<span class=\"sd\">        &gt;&gt;&gt; # ENABLE_DOCTEST</span>\n<span class=\"sd\">        &gt;&gt;&gt; from ibeis.control._autogen_party_funcs import *  # NOQA</span>\n<span class=\"sd\">        &gt;&gt;&gt; ibs, qreq_ = testdata_ibs()</span>\n<span class=\"sd\">        &gt;&gt;&gt; party_rowid_list = ibs._get_all_party_rowids()</span>\n<span class=\"sd\">        &gt;&gt;&gt; eager = True</span>\n<span class=\"sd\">        &gt;&gt;&gt; party_tag_list = ibs.get_party_tag(party_rowid_list, eager=eager)</span>\n<span class=\"sd\">        &gt;&gt;&gt; assert len(party_rowid_list) == len(party_tag_list)</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"n\">id_iter</span> <span class=\"o\">=</span> <span class=\"n\">party_rowid_list</span>\n    <span class=\"n\">colnames</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">PARTY_TAG</span><span class=\"p\">,)</span>\n    <span class=\"n\">party_tag_list</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">db</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span>\n        <span class=\"n\">const</span><span class=\"o\">.</span><span class=\"n\">PARTY_TABLE</span><span class=\"p\">,</span> <span class=\"n\">colnames</span><span class=\"p\">,</span> <span class=\"n\">id_iter</span><span class=\"p\">,</span> <span class=\"n\">id_colname</span><span class=\"o\">=</span><span class=\"s1\">&#39;rowid&#39;</span><span class=\"p\">,</span> <span class=\"n\">eager</span><span class=\"o\">=</span><span class=\"n\">eager</span><span class=\"p\">,</span> <span class=\"n\">nInput</span><span class=\"o\">=</span><span class=\"n\">nInput</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">party_tag_list</span></div>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;__main__&#39;</span><span class=\"p\">:</span>\n    <span class=\"sa\">r</span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    CommandLine:</span>\n<span class=\"sd\">        python -m ibeis.control._autogen_party_funcs</span>\n<span class=\"sd\">        python -m ibeis.control._autogen_party_funcs --allexamples</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">multiprocessing</span>\n    <span class=\"n\">multiprocessing</span><span class=\"o\">.</span><span class=\"n\">freeze_support</span><span class=\"p\">()</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">utool</span> <span class=\"k\">as</span> <span class=\"nn\">ut</span>\n    <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">doctest_funcs</span><span class=\"p\">()</span>\n</pre></div>", "current_page_name": "_modules/ibeis/control/_autogen_party_funcs", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}