{"parents": [{"link": "../../../", "title": "Module code"}, {"link": "../../", "title": "ibeis"}, {"link": "../", "title": "ibeis.viz"}], "title": "ibeis.viz.viz_name", "body": "<h1>Source code for ibeis.viz.viz_name</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"c1\"># -*- coding: utf-8 -*-</span>\n<span class=\"kn\">from</span> <span class=\"nn\">__future__</span> <span class=\"k\">import</span> <span class=\"n\">absolute_import</span><span class=\"p\">,</span> <span class=\"n\">division</span><span class=\"p\">,</span> <span class=\"n\">print_function</span><span class=\"p\">,</span> <span class=\"n\">unicode_literals</span>\n<span class=\"kn\">import</span> <span class=\"nn\">plottool.draw_func2</span> <span class=\"k\">as</span> <span class=\"nn\">df2</span>\n<span class=\"kn\">import</span> <span class=\"nn\">numpy</span> <span class=\"k\">as</span> <span class=\"nn\">np</span>\n<span class=\"kn\">from</span> <span class=\"nn\">ibeis.other</span> <span class=\"k\">import</span> <span class=\"n\">ibsfuncs</span>\n<span class=\"kn\">from</span> <span class=\"nn\">plottool</span> <span class=\"k\">import</span> <span class=\"n\">plot_helpers</span> <span class=\"k\">as</span> <span class=\"n\">ph</span>\n<span class=\"kn\">import</span> <span class=\"nn\">plottool</span> <span class=\"k\">as</span> <span class=\"nn\">pt</span>\n<span class=\"kn\">import</span> <span class=\"nn\">utool</span> <span class=\"k\">as</span> <span class=\"nn\">ut</span>\n<span class=\"kn\">from</span> <span class=\"nn\">ibeis.viz</span> <span class=\"k\">import</span> <span class=\"n\">viz_chip</span>\n<span class=\"p\">(</span><span class=\"nb\">print</span><span class=\"p\">,</span> <span class=\"n\">print_</span><span class=\"p\">,</span> <span class=\"n\">printDBG</span><span class=\"p\">,</span> <span class=\"n\">rrr</span><span class=\"p\">,</span> <span class=\"n\">profile</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">inject</span><span class=\"p\">(</span><span class=\"vm\">__name__</span><span class=\"p\">,</span> <span class=\"s1\">&#39;[viz]&#39;</span><span class=\"p\">,</span> <span class=\"n\">DEBUG</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n\n\n<div class=\"viewcode-block\" id=\"show_name_of\"><a class=\"viewcode-back\" href=\"../../../../ibeis.viz/#ibeis.viz.viz_name.show_name_of\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">show_name_of</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">aid</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n    <span class=\"n\">nid</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_annot_names</span><span class=\"p\">(</span><span class=\"n\">aid</span><span class=\"p\">)</span>\n    <span class=\"n\">show_name</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">nid</span><span class=\"p\">,</span> <span class=\"n\">sel_aids</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">aid</span><span class=\"p\">],</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n\n\n<div class=\"viewcode-block\" id=\"testdata_showname\"><a class=\"viewcode-back\" href=\"../../../../ibeis.viz/#ibeis.viz.viz_name.testdata_showname\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">testdata_showname</span><span class=\"p\">():</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">ibeis</span>\n    <span class=\"n\">ibs</span> <span class=\"o\">=</span> <span class=\"n\">ibeis</span><span class=\"o\">.</span><span class=\"n\">opendb</span><span class=\"p\">(</span><span class=\"n\">defaultdb</span><span class=\"o\">=</span><span class=\"s1\">&#39;testdb1&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">default</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n    <span class=\"k\">if</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">dbname</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;testdb1&#39;</span><span class=\"p\">:</span>\n        <span class=\"n\">default</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;easy&#39;</span>\n\n    <span class=\"n\">name_text</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argval</span><span class=\"p\">(</span><span class=\"s1\">&#39;--name&#39;</span><span class=\"p\">,</span> <span class=\"n\">type_</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"n\">default</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">name_text</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">nid</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"n\">nid</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_name_rowids_from_text</span><span class=\"p\">(</span><span class=\"n\">name_text</span><span class=\"p\">)</span>\n    <span class=\"n\">in_image</span> <span class=\"o\">=</span> <span class=\"ow\">not</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--no-inimage&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">index_list</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argval</span><span class=\"p\">(</span><span class=\"s1\">&#39;--index_list&#39;</span><span class=\"p\">,</span> <span class=\"n\">type_</span><span class=\"o\">=</span><span class=\"nb\">list</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">nid</span><span class=\"p\">,</span> <span class=\"n\">in_image</span><span class=\"p\">,</span> <span class=\"n\">index_list</span></div>\n\n\n<div class=\"viewcode-block\" id=\"testdata_multichips\"><a class=\"viewcode-back\" href=\"../../../../ibeis.viz/#ibeis.viz.viz_name.testdata_multichips\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">testdata_multichips</span><span class=\"p\">():</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">ibeis</span>\n    <span class=\"n\">ibs</span> <span class=\"o\">=</span> <span class=\"n\">ibeis</span><span class=\"o\">.</span><span class=\"n\">opendb</span><span class=\"p\">(</span><span class=\"n\">defaultdb</span><span class=\"o\">=</span><span class=\"s1\">&#39;testdb1&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">nid</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argval</span><span class=\"p\">(</span><span class=\"s1\">&#39;--nid&#39;</span><span class=\"p\">,</span> <span class=\"n\">type_</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n    <span class=\"n\">tags</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argval</span><span class=\"p\">(</span><span class=\"s1\">&#39;--tags&#39;</span><span class=\"p\">,</span> <span class=\"n\">type_</span><span class=\"o\">=</span><span class=\"nb\">list</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">nid</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">aid_list</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_name_aids</span><span class=\"p\">(</span><span class=\"n\">nid</span><span class=\"p\">)</span>\n    <span class=\"k\">elif</span> <span class=\"n\">tags</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">index</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argval</span><span class=\"p\">(</span><span class=\"s1\">&#39;--index&#39;</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n        <span class=\"n\">aid_list</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">filter_aidpairs_by_tags</span><span class=\"p\">(</span><span class=\"n\">any_tags</span><span class=\"o\">=</span><span class=\"n\">tags</span><span class=\"p\">)[</span><span class=\"n\">index</span><span class=\"p\">]</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"c1\">#aid_list = ut.get_argval(&#39;--aids&#39;, type_=list, default=[1, 2, 3])</span>\n        <span class=\"n\">aid_list</span> <span class=\"o\">=</span> <span class=\"n\">ibeis</span><span class=\"o\">.</span><span class=\"n\">testdata_aids</span><span class=\"p\">(</span><span class=\"n\">default_aids</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">],</span> <span class=\"n\">ibs</span><span class=\"o\">=</span><span class=\"n\">ibs</span><span class=\"p\">)</span>\n\n    <span class=\"n\">in_image</span> <span class=\"o\">=</span> <span class=\"ow\">not</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--no-inimage&#39;</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">aid_list</span><span class=\"p\">,</span> <span class=\"n\">in_image</span></div>\n\n<span class=\"c1\">#9108 and 9180</span>\n\n\n<div class=\"viewcode-block\" id=\"show_multiple_chips\"><a class=\"viewcode-back\" href=\"../../../../ibeis.viz/#ibeis.viz.viz_name.show_multiple_chips\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">show_multiple_chips</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">aid_list</span><span class=\"p\">,</span> <span class=\"n\">in_image</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">fnum</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">sel_aids</span><span class=\"o\">=</span><span class=\"p\">[],</span>\n                        <span class=\"n\">subtitle</span><span class=\"o\">=</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">,</span> <span class=\"n\">annote</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    CommandLine:</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --show --no-inimage</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --show --db NNP_Master3 --aids=6435,9861,137,6563,9167,12547,9332,12598,13285 --no-inimage --notitle</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --show --db NNP_Master3 --aids=137,6563,12547,9332,12598,13285 --no-inimage --notitle --adjust=.05</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --show --db NNP_Master3 --aids=6563,9332,13285,12598 --no-inimage --notitle --adjust=.05 --rc=1,4</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --show --db PZ_Master0 --aids=1288 --no-inimage --notitle --adjust=.05</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --show --db PZ_Master0 --aids=4020,4839 --no-inimage --notitle --adjust=.05</span>\n\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --db NNP_Master3 --aids=6524,6540,6571,6751 --no-inimage --notitle --adjust=.05 --diskshow</span>\n\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --db PZ_MTEST -a default:index=0:4 --show</span>\n<span class=\"sd\">        --aids=1 --doboth --show --no-inimage</span>\n\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --db PZ_MTEST --aids=1 --doboth --show --no-inimage</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --db PZ_MTEST --aids=1 --doboth --rc=2,1 --show --no-inimage</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --db PZ_MTEST --aids=1 --doboth --rc=2,1 --show --notitle --trydrawline --no-draw_lbls</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --db PZ_MTEST --aids=1,2 --doboth  --show --notitle --trydrawline</span>\n\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --db PZ_MTEST --aids=1,2,3,4,5 --doboth --rc=2,5 --show --chrlbl --trydrawline --qualtitle --no-figtitle --notitle</span>\n<span class=\"sd\">        --doboth</span>\n<span class=\"sd\">        --doboth --show</span>\n\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_multiple_chips --db NNP_Master3 --aids=15419 --doboth --rc=2,1 --show --notitle --trydrawline --no-draw_lbls</span>\n\n<span class=\"sd\">    Example:</span>\n<span class=\"sd\">        &gt;&gt;&gt; # DISABLE_DOCTEST</span>\n<span class=\"sd\">        &gt;&gt;&gt; from ibeis.viz.viz_name import *  # NOQA</span>\n<span class=\"sd\">        &gt;&gt;&gt; import ibeis</span>\n<span class=\"sd\">        &gt;&gt;&gt; ibs, aid_list, in_image = testdata_multichips()</span>\n<span class=\"sd\">        &gt;&gt;&gt; if True:</span>\n<span class=\"sd\">        &gt;&gt;&gt;     import matplotlib as mpl</span>\n<span class=\"sd\">        &gt;&gt;&gt;     from ibeis.scripts.thesis import TMP_RC</span>\n<span class=\"sd\">        &gt;&gt;&gt;     mpl.rcParams.update(TMP_RC)</span>\n<span class=\"sd\">        &gt;&gt;&gt; fnum = 0</span>\n<span class=\"sd\">        &gt;&gt;&gt; sel_aids = []</span>\n<span class=\"sd\">        &gt;&gt;&gt; subtitle = &#39;&#39;</span>\n<span class=\"sd\">        &gt;&gt;&gt; annote = False</span>\n<span class=\"sd\">        &gt;&gt;&gt; fig = show_multiple_chips(ibs, aid_list, in_image, fnum, sel_aids, subtitle, annote)</span>\n<span class=\"sd\">        &gt;&gt;&gt; ut.quit_if_noshow()</span>\n<span class=\"sd\">        &gt;&gt;&gt; fig.canvas.draw()</span>\n<span class=\"sd\">        &gt;&gt;&gt; ut.show_if_requested()</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"n\">fnum</span> <span class=\"o\">=</span> <span class=\"n\">pt</span><span class=\"o\">.</span><span class=\"n\">ensure_fnum</span><span class=\"p\">(</span><span class=\"n\">fnum</span><span class=\"p\">)</span>\n    <span class=\"n\">nAids</span> <span class=\"o\">=</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">aid_list</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">nAids</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n        <span class=\"n\">fig</span> <span class=\"o\">=</span> <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">figure</span><span class=\"p\">(</span><span class=\"n\">fnum</span><span class=\"o\">=</span><span class=\"n\">fnum</span><span class=\"p\">,</span> <span class=\"n\">pnum</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n        <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">imshow_null</span><span class=\"p\">(</span><span class=\"n\">fnum</span><span class=\"o\">=</span><span class=\"n\">fnum</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">fig</span>\n    <span class=\"c1\"># Trigger computation of all chips in parallel</span>\n    <span class=\"n\">ibsfuncs</span><span class=\"o\">.</span><span class=\"n\">ensure_annotation_data</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">aid_list</span><span class=\"p\">,</span> <span class=\"n\">chips</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"ow\">not</span> <span class=\"n\">in_image</span> <span class=\"ow\">or</span> <span class=\"n\">annote</span><span class=\"p\">),</span> <span class=\"n\">feats</span><span class=\"o\">=</span><span class=\"n\">annote</span><span class=\"p\">)</span>\n\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;[viz_name] * annot_vuuid=</span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">((</span><span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_annot_visual_uuids</span><span class=\"p\">(</span><span class=\"n\">aid_list</span><span class=\"p\">),)))</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;[viz_name] * aid_list=</span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">((</span><span class=\"n\">aid_list</span><span class=\"p\">,)))</span>\n\n    <span class=\"n\">DOBOTH</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--doboth&#39;</span><span class=\"p\">)</span>\n\n    <span class=\"n\">rc</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argval</span><span class=\"p\">(</span><span class=\"s1\">&#39;--rc&#39;</span><span class=\"p\">,</span> <span class=\"n\">type_</span><span class=\"o\">=</span><span class=\"nb\">list</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">rc</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">nRows</span><span class=\"p\">,</span> <span class=\"n\">nCols</span> <span class=\"o\">=</span> <span class=\"n\">ph</span><span class=\"o\">.</span><span class=\"n\">get_square_row_cols</span><span class=\"p\">(</span><span class=\"n\">nAids</span> <span class=\"o\">*</span> <span class=\"p\">(</span><span class=\"mi\">2</span> <span class=\"k\">if</span> <span class=\"n\">DOBOTH</span> <span class=\"k\">else</span> <span class=\"mi\">1</span><span class=\"p\">))</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"n\">nRows</span><span class=\"p\">,</span> <span class=\"n\">nCols</span> <span class=\"o\">=</span> <span class=\"n\">rc</span>\n    <span class=\"n\">notitle</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--notitle&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">draw_lbls</span> <span class=\"o\">=</span> <span class=\"ow\">not</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--no-draw_lbls&#39;</span><span class=\"p\">)</span>\n    <span class=\"n\">show_chip_kw</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">annote</span><span class=\"o\">=</span><span class=\"n\">annote</span><span class=\"p\">,</span> <span class=\"n\">in_image</span><span class=\"o\">=</span><span class=\"n\">in_image</span><span class=\"p\">,</span> <span class=\"n\">notitle</span><span class=\"o\">=</span><span class=\"n\">notitle</span><span class=\"p\">,</span> <span class=\"n\">draw_lbls</span><span class=\"o\">=</span><span class=\"n\">draw_lbls</span><span class=\"p\">)</span>\n    <span class=\"c1\">#print(&#39;[viz_name] * r=%r, c=%r&#39; % (nRows, nCols))</span>\n    <span class=\"c1\">#gs2 = gridspec.GridSpec(nRows, nCols)</span>\n    <span class=\"n\">pnum_</span> <span class=\"o\">=</span> <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">get_pnum_func</span><span class=\"p\">(</span><span class=\"n\">nRows</span><span class=\"p\">,</span> <span class=\"n\">nCols</span><span class=\"p\">)</span>\n    <span class=\"n\">fig</span> <span class=\"o\">=</span> <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">figure</span><span class=\"p\">(</span><span class=\"n\">fnum</span><span class=\"o\">=</span><span class=\"n\">fnum</span><span class=\"p\">,</span> <span class=\"n\">pnum</span><span class=\"o\">=</span><span class=\"n\">pnum_</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n    <span class=\"n\">fig</span><span class=\"o\">.</span><span class=\"n\">clf</span><span class=\"p\">()</span>\n    <span class=\"n\">ax_list1</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n    <span class=\"k\">for</span> <span class=\"n\">px</span><span class=\"p\">,</span> <span class=\"n\">aid</span> <span class=\"ow\">in</span> <span class=\"nb\">enumerate</span><span class=\"p\">(</span><span class=\"n\">aid_list</span><span class=\"p\">):</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;px = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">px</span><span class=\"p\">,))</span>\n        <span class=\"n\">_fig</span><span class=\"p\">,</span> <span class=\"n\">_ax1</span> <span class=\"o\">=</span> <span class=\"n\">viz_chip</span><span class=\"o\">.</span><span class=\"n\">show_chip</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">aid</span><span class=\"o\">=</span><span class=\"n\">aid</span><span class=\"p\">,</span> <span class=\"n\">pnum</span><span class=\"o\">=</span><span class=\"n\">pnum_</span><span class=\"p\">(</span><span class=\"n\">px</span><span class=\"p\">),</span> <span class=\"o\">**</span><span class=\"n\">show_chip_kw</span><span class=\"p\">)</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;other_aids = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_annot_contact_aids</span><span class=\"p\">(</span><span class=\"n\">aid</span><span class=\"p\">),))</span>\n        <span class=\"n\">ax</span> <span class=\"o\">=</span> <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">gca</span><span class=\"p\">()</span>\n        <span class=\"n\">ax_list1</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">_ax1</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">aid</span> <span class=\"ow\">in</span> <span class=\"n\">sel_aids</span><span class=\"p\">:</span>\n            <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">draw_border</span><span class=\"p\">(</span><span class=\"n\">ax</span><span class=\"p\">,</span> <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">GREEN</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--chrlbl&#39;</span><span class=\"p\">)</span> <span class=\"ow\">and</span> <span class=\"ow\">not</span> <span class=\"n\">DOBOTH</span><span class=\"p\">:</span>\n            <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set_xlabel</span><span class=\"p\">(</span><span class=\"s1\">&#39;(&#39;</span> <span class=\"o\">+</span> <span class=\"nb\">chr</span><span class=\"p\">(</span><span class=\"nb\">ord</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span> <span class=\"o\">-</span> <span class=\"mi\">1</span> <span class=\"o\">+</span> <span class=\"n\">px</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"s1\">&#39;)&#39;</span><span class=\"p\">)</span>\n        <span class=\"k\">elif</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--numlbl&#39;</span><span class=\"p\">)</span> <span class=\"ow\">and</span> <span class=\"ow\">not</span> <span class=\"n\">DOBOTH</span><span class=\"p\">:</span>\n            <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set_xlabel</span><span class=\"p\">(</span><span class=\"s1\">&#39;(&#39;</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">px</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"s1\">&#39;)&#39;</span><span class=\"p\">)</span>\n        <span class=\"c1\">#plot_aid3(ibs, aid)</span>\n\n    <span class=\"c1\"># HACK to show in image and not in image</span>\n    <span class=\"k\">if</span> <span class=\"n\">DOBOTH</span><span class=\"p\">:</span>\n        <span class=\"c1\">#ut.embed()</span>\n        <span class=\"c1\">#ph.get_plotdat_dict(ax_list1[1])</span>\n        <span class=\"c1\">#ph.get_plotdat_dict(ax_list2[1])</span>\n        <span class=\"n\">ax_list2</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n\n        <span class=\"n\">show_chip_kw</span><span class=\"p\">[</span><span class=\"s1\">&#39;in_image&#39;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"ow\">not</span> <span class=\"n\">show_chip_kw</span><span class=\"p\">[</span><span class=\"s1\">&#39;in_image&#39;</span><span class=\"p\">]</span>\n        <span class=\"n\">start</span> <span class=\"o\">=</span> <span class=\"n\">px</span> <span class=\"o\">+</span> <span class=\"mi\">1</span>\n        <span class=\"k\">for</span> <span class=\"n\">px</span><span class=\"p\">,</span> <span class=\"n\">aid</span> <span class=\"ow\">in</span> <span class=\"nb\">enumerate</span><span class=\"p\">(</span><span class=\"n\">aid_list</span><span class=\"p\">,</span> <span class=\"n\">start</span><span class=\"o\">=</span><span class=\"n\">start</span><span class=\"p\">):</span>\n            <span class=\"n\">_fig</span><span class=\"p\">,</span> <span class=\"n\">_ax2</span> <span class=\"o\">=</span> <span class=\"n\">viz_chip</span><span class=\"o\">.</span><span class=\"n\">show_chip</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">aid</span><span class=\"o\">=</span><span class=\"n\">aid</span><span class=\"p\">,</span> <span class=\"n\">pnum</span><span class=\"o\">=</span><span class=\"n\">pnum_</span><span class=\"p\">(</span><span class=\"n\">px</span><span class=\"p\">),</span> <span class=\"o\">**</span><span class=\"n\">show_chip_kw</span><span class=\"p\">)</span>\n            <span class=\"n\">ax</span> <span class=\"o\">=</span> <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">gca</span><span class=\"p\">()</span>\n            <span class=\"n\">ax_list2</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">_ax2</span><span class=\"p\">)</span>\n\n            <span class=\"k\">if</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--chrlbl&#39;</span><span class=\"p\">):</span>\n                <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set_xlabel</span><span class=\"p\">(</span><span class=\"s1\">&#39;(&#39;</span> <span class=\"o\">+</span> <span class=\"nb\">chr</span><span class=\"p\">(</span><span class=\"nb\">ord</span><span class=\"p\">(</span><span class=\"s1\">&#39;a&#39;</span><span class=\"p\">)</span> <span class=\"o\">-</span> <span class=\"n\">start</span> <span class=\"o\">+</span> <span class=\"n\">px</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"s1\">&#39;)&#39;</span><span class=\"p\">)</span>\n            <span class=\"k\">elif</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--numlbl&#39;</span><span class=\"p\">):</span>\n                <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set_xlabel</span><span class=\"p\">(</span><span class=\"s1\">&#39;(&#39;</span> <span class=\"o\">+</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">px</span> <span class=\"o\">-</span> <span class=\"n\">start</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"s1\">&#39;)&#39;</span><span class=\"p\">)</span>\n\n            <span class=\"k\">if</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--qualtitle&#39;</span><span class=\"p\">):</span>\n                <span class=\"n\">qualtext</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_annot_quality_texts</span><span class=\"p\">(</span><span class=\"n\">aid</span><span class=\"p\">)</span>\n                <span class=\"n\">ax</span><span class=\"o\">.</span><span class=\"n\">set_title</span><span class=\"p\">(</span><span class=\"n\">qualtext</span><span class=\"p\">)</span>\n\n            <span class=\"k\">if</span> <span class=\"n\">aid</span> <span class=\"ow\">in</span> <span class=\"n\">sel_aids</span><span class=\"p\">:</span>\n                <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">draw_border</span><span class=\"p\">(</span><span class=\"n\">ax</span><span class=\"p\">,</span> <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">GREEN</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">)</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">in_image</span><span class=\"p\">:</span>\n            <span class=\"n\">ax_list1</span><span class=\"p\">,</span> <span class=\"n\">ax_list2</span> <span class=\"o\">=</span> <span class=\"n\">ax_list2</span><span class=\"p\">,</span> <span class=\"n\">ax_list1</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--trydrawline&#39;</span><span class=\"p\">):</span>\n            <span class=\"c1\"># Unfinished</span>\n            <span class=\"c1\">#ut.embed()</span>\n            <span class=\"c1\"># Draw lines between corresponding axes</span>\n            <span class=\"c1\"># References:</span>\n            <span class=\"c1\"># http://stackoverflow.com/questions/17543359/drawing-lines-between-two-plots-in-matplotlib</span>\n            <span class=\"kn\">import</span> <span class=\"nn\">matplotlib</span> <span class=\"k\">as</span> <span class=\"nn\">mpl</span>\n            <span class=\"kn\">import</span> <span class=\"nn\">vtool</span> <span class=\"k\">as</span> <span class=\"nn\">vt</span>\n            <span class=\"c1\"># !!!</span>\n            <span class=\"c1\">#http://matplotlib.org/users/transforms_tutorial.html</span>\n\n            <span class=\"c1\">#invTransFigure_fn1 = fig.transFigure.inverted().transform</span>\n            <span class=\"c1\">#invTransFigure_fn2 = fig.transFigure.inverted().transform</span>\n            <span class=\"c1\">#print(ax_list1)</span>\n            <span class=\"c1\">#print(ax_list2)</span>\n            <span class=\"k\">assert</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">ax_list1</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">ax_list2</span><span class=\"p\">)</span>\n\n            <span class=\"k\">for</span> <span class=\"n\">ax1</span><span class=\"p\">,</span> <span class=\"n\">ax2</span> <span class=\"ow\">in</span> <span class=\"nb\">zip</span><span class=\"p\">(</span><span class=\"n\">ax_list1</span><span class=\"p\">,</span> <span class=\"n\">ax_list2</span><span class=\"p\">):</span>\n                <span class=\"c1\">#_ = ax1.get_window_extent().transformed(fig.dpi_scale_trans.inverted())</span>\n                <span class=\"c1\">#bbox1 = (0, 0, _.width * fig.dpi, _.height * fig.dpi)</span>\n\n                <span class=\"c1\"># returns in figure coordinates</span>\n                <span class=\"c1\">#bbox1 = df2.get_axis_bbox(ax=ax1)</span>\n                <span class=\"c1\">#if bbox1[-1] &lt; 0:</span>\n                <span class=\"c1\">#    # Weird bug</span>\n                <span class=\"c1\">#    bbox1 = bbox1[1]</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;--&#39;</span><span class=\"p\">)</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;ax1 = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">ax1</span><span class=\"p\">,))</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;ax2 = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">ax2</span><span class=\"p\">,))</span>\n                <span class=\"n\">chipshape</span> <span class=\"o\">=</span> <span class=\"n\">ph</span><span class=\"o\">.</span><span class=\"n\">get_plotdat</span><span class=\"p\">(</span><span class=\"n\">ax1</span><span class=\"p\">,</span> <span class=\"s1\">&#39;chipshape&#39;</span><span class=\"p\">)</span>\n                <span class=\"c1\">#_bbox1 = ax1.get_window_extent().transformed(fig.dpi_scale_trans.inverted())</span>\n                <span class=\"c1\">#bbox1 = (0, 0, _bbox1.width * fig.dpi, _bbox1.height * fig.dpi)</span>\n                <span class=\"n\">bbox1</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">chipshape</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"n\">chipshape</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n\n                <span class=\"n\">aid_</span> <span class=\"o\">=</span> <span class=\"n\">ph</span><span class=\"o\">.</span><span class=\"n\">get_plotdat</span><span class=\"p\">(</span><span class=\"n\">ax2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;aid&#39;</span><span class=\"p\">)</span>\n                <span class=\"n\">aid_list_</span> <span class=\"o\">=</span> <span class=\"n\">ph</span><span class=\"o\">.</span><span class=\"n\">get_plotdat</span><span class=\"p\">(</span><span class=\"n\">ax2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;aid_list&#39;</span><span class=\"p\">)</span>\n                <span class=\"n\">index</span> <span class=\"o\">=</span> <span class=\"n\">aid_list_</span><span class=\"o\">.</span><span class=\"n\">index</span><span class=\"p\">(</span><span class=\"n\">aid_</span><span class=\"p\">)</span>\n                <span class=\"n\">annotation_bbox_list</span> <span class=\"o\">=</span> <span class=\"n\">ph</span><span class=\"o\">.</span><span class=\"n\">get_plotdat</span><span class=\"p\">(</span><span class=\"n\">ax2</span><span class=\"p\">,</span> <span class=\"s1\">&#39;annotation_bbox_list&#39;</span><span class=\"p\">)</span>\n                <span class=\"n\">bbox2</span> <span class=\"o\">=</span> <span class=\"n\">annotation_bbox_list</span><span class=\"p\">[</span><span class=\"n\">index</span><span class=\"p\">]</span>\n\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;bbox1 = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">bbox1</span><span class=\"p\">,))</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;bbox2 = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">bbox2</span><span class=\"p\">,))</span>\n\n                <span class=\"n\">vert_list1</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">(</span><span class=\"n\">vt</span><span class=\"o\">.</span><span class=\"n\">verts_from_bbox</span><span class=\"p\">(</span><span class=\"n\">bbox1</span><span class=\"p\">))</span>\n                <span class=\"n\">vert_list2</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">(</span><span class=\"n\">vt</span><span class=\"o\">.</span><span class=\"n\">verts_from_bbox</span><span class=\"p\">(</span><span class=\"n\">bbox2</span><span class=\"p\">))</span>\n\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;vert_list1 = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">vert_list1</span><span class=\"p\">,))</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;vert_list2 = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">vert_list2</span><span class=\"p\">,))</span>\n                <span class=\"c1\">#for vx in [0, 1, 2, 3]:</span>\n                <span class=\"k\">for</span> <span class=\"n\">vx</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">]:</span>\n                    <span class=\"n\">vert1</span> <span class=\"o\">=</span> <span class=\"n\">vert_list1</span><span class=\"p\">[</span><span class=\"n\">vx</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">tolist</span><span class=\"p\">()</span>\n                    <span class=\"n\">vert2</span> <span class=\"o\">=</span> <span class=\"n\">vert_list2</span><span class=\"p\">[</span><span class=\"n\">vx</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">tolist</span><span class=\"p\">()</span>\n                    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;  ***&#39;</span><span class=\"p\">)</span>\n                    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;  * vert1 = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">vert1</span><span class=\"p\">,))</span>\n                    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;  * vert2 = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">vert2</span><span class=\"p\">,))</span>\n\n                    <span class=\"n\">coordsA</span> <span class=\"o\">=</span> <span class=\"n\">coordsB</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;data&#39;</span>\n                    <span class=\"c1\">#coords = &#39;axes points&#39;</span>\n                    <span class=\"c1\">#&#39;axes fraction&#39;</span>\n                    <span class=\"c1\">#&#39;axes pixels&#39;</span>\n                    <span class=\"c1\">#coordsA = &#39;axes pixels&#39;</span>\n                    <span class=\"c1\">#coordsB = &#39;data&#39;</span>\n                    <span class=\"c1\">#&#39;figure fraction&#39;</span>\n                    <span class=\"c1\">#&#39;figure pixels&#39;</span>\n                    <span class=\"c1\">#&#39;figure pixels&#39;</span>\n                    <span class=\"c1\">#&#39;figure points&#39;</span>\n                    <span class=\"c1\">#&#39;polar&#39;</span>\n                    <span class=\"c1\">#&#39;offset points&#39;</span>\n\n                    <span class=\"n\">con</span> <span class=\"o\">=</span> <span class=\"n\">mpl</span><span class=\"o\">.</span><span class=\"n\">patches</span><span class=\"o\">.</span><span class=\"n\">ConnectionPatch</span><span class=\"p\">(</span>\n                        <span class=\"n\">xyA</span><span class=\"o\">=</span><span class=\"n\">vert1</span><span class=\"p\">,</span> <span class=\"n\">xyB</span><span class=\"o\">=</span><span class=\"n\">vert2</span><span class=\"p\">,</span> <span class=\"n\">coordsA</span><span class=\"o\">=</span><span class=\"n\">coordsA</span><span class=\"p\">,</span>\n                        <span class=\"n\">coordsB</span><span class=\"o\">=</span><span class=\"n\">coordsB</span><span class=\"p\">,</span>\n                        <span class=\"n\">axesA</span><span class=\"o\">=</span><span class=\"n\">ax1</span><span class=\"p\">,</span> <span class=\"n\">axesB</span><span class=\"o\">=</span><span class=\"n\">ax2</span><span class=\"p\">,</span>\n                        <span class=\"n\">linewidth</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">color</span><span class=\"o\">=</span><span class=\"s1\">&#39;k&#39;</span><span class=\"p\">)</span>\n                    <span class=\"c1\">#, arrowstyle=&quot;-&quot;)</span>\n\n                    <span class=\"c1\">#ut.embed()</span>\n                    <span class=\"c1\">#con.set_zorder(None)</span>\n                    <span class=\"n\">ax1</span><span class=\"o\">.</span><span class=\"n\">add_artist</span><span class=\"p\">(</span><span class=\"n\">con</span><span class=\"p\">)</span>\n                    <span class=\"c1\">#ax2.add_artist(con)</span>\n\n                    <span class=\"c1\">#ut.embed()</span>\n\n                    <span class=\"c1\">#verts2.T[1] -= bbox2[-1]</span>\n                    <span class=\"c1\">#bottom_left1, bottom_right1 = verts1[1:3].tolist()</span>\n                    <span class=\"c1\">#bottom_left2, bottom_right2 = verts2[1:3].tolist()</span>\n\n                <span class=\"c1\">##transAxes1 = ax1.transData.inverted()</span>\n                <span class=\"c1\">#transAxes1_fn = ax1.transData.transform</span>\n                <span class=\"c1\">#transAxes2_fn = ax2.transData.transform</span>\n\n                <span class=\"c1\">#transAxes1_fn = ut.identity</span>\n                <span class=\"c1\">#transAxes2_fn = ut.identity</span>\n\n                <span class=\"c1\">#coord_bl1 = transFigure.transform(transAxes1.transform(bottom_left1))</span>\n                <span class=\"c1\">#coord_br1 = transFigure.transform(transAxes1.transform(bottom_right1))</span>\n                <span class=\"c1\">#coord_bl1 = invTransFigure_fn1(transAxes1_fn(bottom_left1))</span>\n                <span class=\"c1\">#print(&#39;bottom_left2 = %r&#39; % (bottom_left2,))</span>\n                <span class=\"c1\">#coord_bl1 = (5, 5)</span>\n                <span class=\"c1\">#coord_bl2 = invTransFigure_fn2(transAxes2_fn(bottom_left2))</span>\n                <span class=\"c1\">#print(&#39;coord_bl2 = %r&#39; % (coord_bl2,))</span>\n\n                <span class=\"c1\">#coord_br1 = invTransFigure_fn1(transAxes1_fn(bottom_right1))</span>\n                <span class=\"c1\">#coord_br2 = invTransFigure_fn2(transAxes2_fn(bottom_right2))</span>\n                <span class=\"c1\">##print(&#39;coord_bl1 = %r&#39; % (coord_bl1,))</span>\n\n                <span class=\"c1\">#line_coords1 = np.vstack([coord_bl1, coord_bl2])</span>\n                <span class=\"c1\">#line_coords2 = np.vstack([coord_br1, coord_br2])</span>\n                <span class=\"c1\">#print(&#39;line_coords1 = %r&#39; % (line_coords1,))</span>\n\n                <span class=\"c1\">#line1 = mpl.lines.Line2D((line_coords1[0]), (line_coords1[1]), transform=fig.transFigure)</span>\n                <span class=\"c1\">#line2 = mpl.lines.Line2D((line_coords2[0]), (line_coords2[1]), transform=fig.transFigure)</span>\n\n                <span class=\"c1\">#xs1, ys1 = line_coords1.T</span>\n                <span class=\"c1\">#xs2, ys2 = line_coords2.T</span>\n\n                <span class=\"c1\">#linekw = dict(transform=fig.transFigure)</span>\n                <span class=\"c1\">#linekw = dict()</span>\n\n                <span class=\"c1\">#print(&#39;xs1 = %r&#39; % (xs1,))</span>\n                <span class=\"c1\">#print(&#39;ys1 = %r&#39; % (ys1,))</span>\n\n                <span class=\"c1\">#line1 = mpl.lines.Line2D(xs1, ys1, **linekw)</span>\n                <span class=\"c1\">#line2 = mpl.lines.Line2D(xs2, ys2, **linekw)  # NOQA</span>\n                <span class=\"c1\">#shrinkA=5, shrinkB=5, mutation_scale=20, fc=&quot;w&quot;)</span>\n\n                <span class=\"c1\">#ax2.add_artist(con)</span>\n\n                <span class=\"c1\">#fig.lines.append(line1)</span>\n                <span class=\"c1\">#fig.lines.append(line2)</span>\n\n        <span class=\"k\">pass</span>\n    <span class=\"k\">return</span> <span class=\"n\">fig</span></div>\n\n\n<span class=\"c1\">#@ut.indent_func</span>\n<div class=\"viewcode-block\" id=\"show_name\"><a class=\"viewcode-back\" href=\"../../../../ibeis.viz/#ibeis.viz.viz_name.show_name\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">show_name</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">nid</span><span class=\"p\">,</span> <span class=\"n\">in_image</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">fnum</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">sel_aids</span><span class=\"o\">=</span><span class=\"p\">[],</span> <span class=\"n\">subtitle</span><span class=\"o\">=</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">,</span>\n              <span class=\"n\">annote</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">,</span> <span class=\"n\">aid_list</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">index_list</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>  <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n    <span class=\"sa\">r</span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Args:</span>\n<span class=\"sd\">        ibs (IBEISController):  ibeis controller object</span>\n<span class=\"sd\">        nid (?):</span>\n<span class=\"sd\">        in_image (bool):</span>\n<span class=\"sd\">        fnum (int):  figure number</span>\n<span class=\"sd\">        sel_aids (list):</span>\n<span class=\"sd\">        subtitle (str):</span>\n<span class=\"sd\">        annote (bool):</span>\n\n<span class=\"sd\">    CommandLine:</span>\n\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_name --dpath ~/latex/crall-candidacy-2015 --save &#39;figures/{name}.jpg&#39; --no-figtitle --notitle --db NNP_Master3 --figsize=9,4 --clipwhite --dpi=180 --adjust=.05 --index_list=[0,1,2,3] --rc=2,4 --append temp_out_figure.tex --name=IBEIS_PZ_0739 --no-draw_lbls --doboth --no-inimage  --diskshow</span>\n\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_name --no-figtitle --notitle --db NNP_Master3 --figsize=9,4 --clipwhite --dpi=180 --adjust=.05 --index_list=[0,1,2,3] --rc=2,4 --append temp_out_figure.tex --name=IBEIS_PZ_0739 --no-draw_lbls --doboth --no-inimage  --show</span>\n\n<span class=\"sd\">        python -m ibeis.viz.viz_name --test-show_name --show</span>\n\n<span class=\"sd\">    Example:</span>\n<span class=\"sd\">        &gt;&gt;&gt; # DISABLE_DOCTEST</span>\n<span class=\"sd\">        &gt;&gt;&gt; from ibeis.viz.viz_name import *  # NOQA</span>\n<span class=\"sd\">        &gt;&gt;&gt; ibs, nid, in_image, index_list = testdata_showname()</span>\n<span class=\"sd\">        &gt;&gt;&gt; fnum = 0</span>\n<span class=\"sd\">        &gt;&gt;&gt; sel_aids = []</span>\n<span class=\"sd\">        &gt;&gt;&gt; subtitle = &#39;&#39;</span>\n<span class=\"sd\">        &gt;&gt;&gt; annote = False</span>\n<span class=\"sd\">        &gt;&gt;&gt; # execute function</span>\n<span class=\"sd\">        &gt;&gt;&gt; show_name(ibs, nid, in_image, fnum, sel_aids, subtitle, annote, index_list=index_list)</span>\n<span class=\"sd\">        &gt;&gt;&gt; ut.show_if_requested()</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;[viz_name] show_name nid=</span><span class=\"si\">%r</span><span class=\"s1\">, index_list=</span><span class=\"si\">%r</span><span class=\"s1\">, aid_list=</span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">nid</span><span class=\"p\">,</span> <span class=\"n\">index_list</span><span class=\"p\">,</span> <span class=\"n\">aid_list</span><span class=\"p\">))</span>\n    <span class=\"k\">if</span> <span class=\"n\">aid_list</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">aid_list</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_name_aids</span><span class=\"p\">(</span><span class=\"n\">nid</span><span class=\"p\">)</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"k\">assert</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">list_all_eq_to</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_annot_nids</span><span class=\"p\">(</span><span class=\"n\">aid_list</span><span class=\"p\">),</span> <span class=\"n\">nid</span><span class=\"p\">)</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">index_list</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">aid_list</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">take</span><span class=\"p\">(</span><span class=\"n\">aid_list</span><span class=\"p\">,</span> <span class=\"n\">index_list</span><span class=\"p\">)</span>\n\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_name_texts</span><span class=\"p\">((</span><span class=\"n\">nid</span><span class=\"p\">,))</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;[viz_name] * name=</span><span class=\"si\">%r</span><span class=\"s1\"> aid_list=</span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">aid_list</span><span class=\"p\">))</span>\n\n    <span class=\"n\">show_multiple_chips</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">aid_list</span><span class=\"p\">,</span> <span class=\"n\">in_image</span><span class=\"o\">=</span><span class=\"n\">in_image</span><span class=\"p\">,</span> <span class=\"n\">fnum</span><span class=\"o\">=</span><span class=\"n\">fnum</span><span class=\"p\">,</span>\n                        <span class=\"n\">sel_aids</span><span class=\"o\">=</span><span class=\"n\">sel_aids</span><span class=\"p\">,</span> <span class=\"n\">annote</span><span class=\"o\">=</span><span class=\"n\">annote</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n\n    <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">nid</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">ndarray</span><span class=\"p\">):</span>\n        <span class=\"n\">nid</span> <span class=\"o\">=</span> <span class=\"n\">nid</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n    <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">ndarray</span><span class=\"p\">):</span>\n        <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">name</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n\n    <span class=\"n\">use_figtitle</span> <span class=\"o\">=</span> <span class=\"ow\">not</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">get_argflag</span><span class=\"p\">(</span><span class=\"s1\">&#39;--no-figtitle&#39;</span><span class=\"p\">)</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">use_figtitle</span><span class=\"p\">:</span>\n        <span class=\"n\">figtitle</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;Name View nid=</span><span class=\"si\">%r</span><span class=\"s1\"> name=</span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">nid</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">)</span>\n        <span class=\"n\">df2</span><span class=\"o\">.</span><span class=\"n\">set_figtitle</span><span class=\"p\">(</span><span class=\"n\">figtitle</span><span class=\"p\">)</span></div>\n    <span class=\"c1\">#if not annote:</span>\n    <span class=\"c1\">#    title += &#39; noannote&#39;</span>\n    <span class=\"c1\">#gs2.tight_layout(fig)</span>\n    <span class=\"c1\">#gs2.update(top=df2.TOP_SUBPLOT_ADJUST)</span>\n    <span class=\"c1\">#df2.set_figtitle(title, subtitle)</span>\n\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;__main__&#39;</span><span class=\"p\">:</span>\n    <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    CommandLine:</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --allexamples</span>\n<span class=\"sd\">        python -m ibeis.viz.viz_name --allexamples --noface --nosrc</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">multiprocessing</span>\n    <span class=\"n\">multiprocessing</span><span class=\"o\">.</span><span class=\"n\">freeze_support</span><span class=\"p\">()</span>  <span class=\"c1\"># for win32</span>\n    <span class=\"kn\">import</span> <span class=\"nn\">utool</span> <span class=\"k\">as</span> <span class=\"nn\">ut</span>  <span class=\"c1\"># NOQA</span>\n    <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">doctest_funcs</span><span class=\"p\">()</span>\n</pre></div>", "current_page_name": "_modules/ibeis/viz/viz_name", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}