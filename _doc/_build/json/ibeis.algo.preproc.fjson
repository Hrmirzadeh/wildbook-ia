{"parents": [{"link": "../ibeis/", "title": "ibeis package"}, {"link": "../ibeis.algo/", "title": "ibeis.algo package"}], "prev": {"link": "../ibeis.algo.hots/", "title": "ibeis.algo.hots package"}, "next": {"link": "../ibeis.algo.smk/", "title": "ibeis.algo.smk package"}, "title": "ibeis.algo.preproc package", "meta": {}, "body": "<div class=\"section\" id=\"ibeis-algo-preproc-package\">\n<h1>ibeis.algo.preproc package<a class=\"headerlink\" href=\"#ibeis-algo-preproc-package\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"section\" id=\"submodules\">\n<h2>Submodules<a class=\"headerlink\" href=\"#submodules\" title=\"Permalink to this headline\">\u00b6</a></h2>\n</div>\n<div class=\"section\" id=\"module-ibeis.algo.preproc.occurrence_blackbox\">\n<span id=\"ibeis-algo-preproc-occurrence-blackbox-module\"></span><h2>ibeis.algo.preproc.occurrence_blackbox module<a class=\"headerlink\" href=\"#module-ibeis.algo.preproc.occurrence_blackbox\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>animal_walking_speeds</p>\n<p>ZEBRA_SPEED_MAX  = 64  # km/h\nZEBRA_SPEED_RUN  = 50  # km/h\nZEBRA_SPEED_SLOW_RUN  = 20  # km/h\nZEBRA_SPEED_FAST_WALK = 10  # km/h\nZEBRA_SPEED_WALK = 7  # km/h</p>\n<p>km_per_sec = .02\nkm_per_sec = .002\nmph = km_per_sec / ut.KM_PER_MILE * 60 * 60\nprint(\u2018mph = %r\u2019 % (mph,))</p>\n<p>1 / km_per_sec</p>\n<p>import datetime\nthresh_sec = datetime.timedelta(minutes=5).seconds\nthresh_km = thresh_sec * km_per_sec\nprint(\u2018thresh_sec = %r\u2019 % (thresh_sec,))\nprint(\u2018thresh_km = %r\u2019 % (thresh_km,))\nthresh_sec = thresh_km / km_per_sec\nprint(\u2018thresh_sec = %r\u2019 % (thresh_sec,))</p>\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.cluster_timespace_km\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">cluster_timespace_km</code><span class=\"sig-paren\">(</span><em>posixtimes</em>, <em>latlons</em>, <em>thresh_km</em>, <em>km_per_sec=0.002</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#cluster_timespace_km\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.cluster_timespace_km\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Agglometerative clustering of time/space data</p>\n<table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Parameters:</th><td class=\"field-body\"><ul class=\"first last simple\">\n<li><strong>X_data</strong> (<em>ndarray</em>) \u2013 Nx3 array where columns are (seconds, lat, lon)</li>\n<li><strong>thresh_km</strong> (<em>float</em>) \u2013 threshold in kilometers</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p class=\"rubric\">References</p>\n<dl class=\"docutils\">\n<dt><a class=\"reference external\" href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/\">http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/</a></dt>\n<dd>scipy.cluster.hierarchy.linkage.html\nscipy.cluster.hierarchy.fcluster.html</dd>\n</dl>\n<p class=\"rubric\">Notes</p>\n<p># Visualize spots\n<a class=\"reference external\" href=\"http://www.darrinward.com/lat-long/?id=2009879\">http://www.darrinward.com/lat-long/?id=2009879</a></p>\n<dl class=\"docutils\">\n<dt>CommandLine:</dt>\n<dd>python -m ibeis.algo.preproc.occurrence_blackbox cluster_timespace_km</dd>\n<dt>Doctest:</dt>\n<dd><div class=\"first last highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.occurrence_blackbox</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Nx1 matrix denoting groundtruth locations (for testing)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_name</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Nx3 matrix where each columns are (time, lat, lon)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_data</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.727985</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.683994</span><span class=\"p\">),</span>  <span class=\"c1\"># MRC</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.657414</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.774448</span><span class=\"p\">),</span>  <span class=\"c1\"># Park1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.658333</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.770993</span><span class=\"p\">),</span>  <span class=\"c1\"># Park2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.654384</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.768919</span><span class=\"p\">),</span>  <span class=\"c1\"># Park3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.655039</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.769048</span><span class=\"p\">),</span>  <span class=\"c1\"># Park4</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.657872</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.764148</span><span class=\"p\">),</span>  <span class=\"c1\"># Park5</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.876974</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.819311</span><span class=\"p\">),</span>  <span class=\"c1\"># CP1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.862946</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.804977</span><span class=\"p\">),</span>  <span class=\"c1\"># CP2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.849809</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.758486</span><span class=\"p\">),</span>  <span class=\"c1\"># CP3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thresh_km</span> <span class=\"o\">=</span> <span class=\"mf\">5.0</span>  <span class=\"c1\"># kilometers</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">posixtimes</span> <span class=\"o\">=</span> <span class=\"n\">X_data</span><span class=\"o\">.</span><span class=\"n\">T</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">latlons</span> <span class=\"o\">=</span> <span class=\"n\">X_data</span><span class=\"o\">.</span><span class=\"n\">T</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"mi\">3</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">T</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">km_per_sec</span> <span class=\"o\">=</span> <span class=\"n\">KM_PER_SEC</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_labels</span> <span class=\"o\">=</span> <span class=\"n\">cluster_timespace_km</span><span class=\"p\">(</span><span class=\"n\">posixtimes</span><span class=\"p\">,</span> <span class=\"n\">latlons</span><span class=\"p\">,</span> <span class=\"n\">thresh_km</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;X_labels = </span><span class=\"si\">{}</span><span class=\"s1\">&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">repr2</span><span class=\"p\">(</span><span class=\"n\">X_labels</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>\n<span class=\"go\">X_labels = np.array([3, 2, 2, 2, 2, 2, 1, 1, 1])</span>\n</pre></div>\n</div>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.cluster_timespace_sec\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">cluster_timespace_sec</code><span class=\"sig-paren\">(</span><em>posixtimes</em>, <em>latlons</em>, <em>thresh_sec=5</em>, <em>km_per_sec=0.002</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#cluster_timespace_sec\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.cluster_timespace_sec\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Parameters:</th><td class=\"field-body\"><ul class=\"first last simple\">\n<li><strong>X_data</strong> (<em>ndarray</em>) \u2013 Nx3 array where columns are (seconds, lat, lon)</li>\n<li><strong>thresh_sec</strong> (<em>float</em>) \u2013 threshold in seconds</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<dl class=\"docutils\">\n<dt>Doctest:</dt>\n<dd><div class=\"first last highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.occurrence_blackbox</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Nx1 matrix denoting groundtruth locations (for testing)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_name</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Nx3 matrix where each columns are (time, lat, lon)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_data</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.727985</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.683994</span><span class=\"p\">),</span>  <span class=\"c1\"># MRC</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.657414</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.774448</span><span class=\"p\">),</span>  <span class=\"c1\"># Park1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.658333</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.770993</span><span class=\"p\">),</span>  <span class=\"c1\"># Park2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.654384</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.768919</span><span class=\"p\">),</span>  <span class=\"c1\"># Park3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.655039</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.769048</span><span class=\"p\">),</span>  <span class=\"c1\"># Park4</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.657872</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.764148</span><span class=\"p\">),</span>  <span class=\"c1\"># Park5</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.876974</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.819311</span><span class=\"p\">),</span>  <span class=\"c1\"># CP1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.862946</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.804977</span><span class=\"p\">),</span>  <span class=\"c1\"># CP2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.849809</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.758486</span><span class=\"p\">),</span>  <span class=\"c1\"># CP3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">posixtimes</span> <span class=\"o\">=</span> <span class=\"n\">X_data</span><span class=\"o\">.</span><span class=\"n\">T</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">latlons</span> <span class=\"o\">=</span> <span class=\"n\">X_data</span><span class=\"o\">.</span><span class=\"n\">T</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"mi\">3</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">T</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thresh_sec</span> <span class=\"o\">=</span> <span class=\"mi\">250</span>  <span class=\"c1\"># seconds</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_labels</span> <span class=\"o\">=</span> <span class=\"n\">cluster_timespace_sec</span><span class=\"p\">(</span><span class=\"n\">posixtimes</span><span class=\"p\">,</span> <span class=\"n\">latlons</span><span class=\"p\">,</span> <span class=\"n\">thresh_sec</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s1\">&#39;X_labels = </span><span class=\"si\">%r</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">X_labels</span><span class=\"p\">,))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>\n<span class=\"go\">X_labels = array([6, 4, 4, 4, 4, 5, 1, 2, 3])</span>\n</pre></div>\n</div>\n</dd>\n<dt>Doctest:</dt>\n<dd><div class=\"first last highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.occurrence_blackbox</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Nx1 matrix denoting groundtruth locations (for testing)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_name</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Nx3 matrix where each columns are (time, lat, lon)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_data</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"mf\">42.657414</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.774448</span><span class=\"p\">),</span>  <span class=\"c1\"># Park1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.658333</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.770993</span><span class=\"p\">),</span>  <span class=\"c1\"># Park2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">),</span>  <span class=\"c1\"># Park3</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">),</span>  <span class=\"c1\"># Park3.5</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.655039</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.769048</span><span class=\"p\">),</span>  <span class=\"c1\"># Park4</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mf\">42.657872</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.764148</span><span class=\"p\">),</span>  <span class=\"c1\"># Park5</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">posixtimes</span> <span class=\"o\">=</span> <span class=\"n\">X_data</span><span class=\"o\">.</span><span class=\"n\">T</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">latlons</span> <span class=\"o\">=</span> <span class=\"n\">X_data</span><span class=\"o\">.</span><span class=\"n\">T</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"mi\">3</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">T</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thresh_sec</span> <span class=\"o\">=</span> <span class=\"mi\">250</span>  <span class=\"c1\"># seconds</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">km_per_sec</span> <span class=\"o\">=</span> <span class=\"n\">KM_PER_SEC</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_labels</span> <span class=\"o\">=</span> <span class=\"n\">cluster_timespace_sec</span><span class=\"p\">(</span><span class=\"n\">posixtimes</span><span class=\"p\">,</span> <span class=\"n\">latlons</span><span class=\"p\">,</span> <span class=\"n\">thresh_sec</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;X_labels = </span><span class=\"si\">{}</span><span class=\"s1\">&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">repr2</span><span class=\"p\">(</span><span class=\"n\">X_labels</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>\n<span class=\"go\">X_labels = np.array([3, 4, 1, 2, 4, 5])</span>\n</pre></div>\n</div>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.haversine\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">haversine</code><span class=\"sig-paren\">(</span><em>latlon1</em>, <em>latlon2</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#haversine\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.haversine\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Calculate the great circle distance between two points\non the earth (specified in decimal degrees)</p>\n<table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Parameters:</th><td class=\"field-body\"><ul class=\"first simple\">\n<li><strong>latlon1</strong> (<em>tuple</em>) \u2013 (lat, lon)</li>\n<li><strong>latlon2</strong> (<em>tuple</em>) \u2013 (lat, lon)</li>\n</ul>\n</td>\n</tr>\n<tr class=\"field-even field\"><th class=\"field-name\">Returns:</th><td class=\"field-body\"><p class=\"first\">distance in kilometers</p>\n</td>\n</tr>\n<tr class=\"field-odd field\"><th class=\"field-name\">Return type:</th><td class=\"field-body\"><p class=\"first last\">float</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p class=\"rubric\">References</p>\n<p>en.wikipedia.org/wiki/Haversine_formula\ngis.stackexchange.com/questions/81551/matching-gps-tracks\nstackoverflow.com/questions/4913349/haversine-distance-gps-points</p>\n<dl class=\"docutils\">\n<dt>Doctest:</dt>\n<dd><div class=\"first last highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.occurrence_blackbox</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">scipy.spatial.distance</span> <span class=\"k\">as</span> <span class=\"nn\">spdist</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">functools</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">latlon1</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">80.21895315</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">158.81099213</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">latlon2</span> <span class=\"o\">=</span> <span class=\"p\">[</span>  <span class=\"mf\">9.77816711</span><span class=\"p\">,</span>  <span class=\"o\">-</span><span class=\"mf\">17.27471498</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">kilometers</span> <span class=\"o\">=</span> <span class=\"n\">haversine</span><span class=\"p\">(</span><span class=\"n\">latlon1</span><span class=\"p\">,</span> <span class=\"n\">latlon2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s1\">&#39;kilometers = </span><span class=\"si\">%s</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">kilometers</span><span class=\"p\">,))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>\n<span class=\"go\">kilometers = 11930.909364189827</span>\n</pre></div>\n</div>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.haversine_rad\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">haversine_rad</code><span class=\"sig-paren\">(</span><em>lat1</em>, <em>lon1</em>, <em>lat2</em>, <em>lon2</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#haversine_rad\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.haversine_rad\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.main\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">main</code><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#main\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.main\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><dl class=\"docutils\">\n<dt>CommandLine:</dt>\n<dd>ib\ncd ~/code/ibeis/ibeis/algo/preproc\npython occurrence_blackbox.py \u2013lat 42.727985 42.657414 42.658333 42.654384 \u2013lon -73.683994 -73.774448 -73.770993 -73.768919 \u2013sec 0 0 0 0\n# Should return\nX_labels = [2, 1, 1, 1]</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.prepare_data\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">prepare_data</code><span class=\"sig-paren\">(</span><em>posixtimes</em>, <em>latlons</em>, <em>km_per_sec=0.002</em>, <em>thresh_units='seconds'</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#prepare_data\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.prepare_data\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Package datas and picks distance function</p>\n<table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Parameters:</th><td class=\"field-body\"><ul class=\"first simple\">\n<li><strong>posixtimes</strong> (<em>ndarray</em>) \u2013 </li>\n<li><strong>latlons</strong> (<em>ndarray</em>) \u2013 </li>\n<li><strong>km_per_sec</strong> (<em>float</em>) \u2013 (default = 0.002)</li>\n<li><strong>thresh_units</strong> (<em>str</em>) \u2013 (default = \u2018seconds\u2019)</li>\n</ul>\n</td>\n</tr>\n<tr class=\"field-even field\"><th class=\"field-name\">Returns:</th><td class=\"field-body\"><p class=\"first\"><a href=\"#id1\"><span class=\"problematic\" id=\"id2\">arr_</span></a> -</p>\n</td>\n</tr>\n<tr class=\"field-odd field\"><th class=\"field-name\">Return type:</th><td class=\"field-body\"><p class=\"first last\">ndarray</p>\n</td>\n</tr>\n</tbody>\n</table>\n<dl class=\"docutils\">\n<dt>CommandLine:</dt>\n<dd>python -m ibeis.algo.preproc.occurrence_blackbox prepare_data</dd>\n<dt>Doctest:</dt>\n<dd><div class=\"first last highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.occurrence_blackbox</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">posixtimes</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span><span class=\"mi\">10</span><span class=\"p\">,</span> <span class=\"mi\">50</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"mi\">5</span><span class=\"p\">,</span> <span class=\"mi\">80</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">latlons</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">([</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mf\">42.727985</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.683994</span><span class=\"p\">),</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">),</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">),</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mf\">42.658333</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.770993</span><span class=\"p\">),</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mf\">42.227985</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.083994</span><span class=\"p\">),</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">),</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">,</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">nan</span><span class=\"p\">),</span>\n<span class=\"gp\">&gt;&gt;&gt; </span>    <span class=\"p\">(</span><span class=\"mf\">42.258333</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">73.470993</span><span class=\"p\">),</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"p\">])</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">km_per_sec</span> <span class=\"o\">=</span> <span class=\"mf\">0.002</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thresh_units</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;seconds&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_data</span><span class=\"p\">,</span> <span class=\"n\">dist_func</span><span class=\"p\">,</span> <span class=\"n\">columns</span> <span class=\"o\">=</span> <span class=\"n\">prepare_data</span><span class=\"p\">(</span><span class=\"n\">posixtimes</span><span class=\"p\">,</span> <span class=\"n\">latlons</span><span class=\"p\">,</span> <span class=\"n\">km_per_sec</span><span class=\"p\">,</span> <span class=\"n\">thresh_units</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s1\">&#39;arr_ = </span><span class=\"si\">%s</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">repr2</span><span class=\"p\">(</span><span class=\"n\">X_data</span><span class=\"p\">),))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"p\">[</span><span class=\"n\">dist_func</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span> <span class=\"ow\">in</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">combinations</span><span class=\"p\">(</span><span class=\"n\">X_data</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">)]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.space_distance_km\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">space_distance_km</code><span class=\"sig-paren\">(</span><em>pt1</em>, <em>pt2</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#space_distance_km\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.space_distance_km\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.space_distance_sec\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">space_distance_sec</code><span class=\"sig-paren\">(</span><em>pt1</em>, <em>pt2</em>, <em>km_per_sec=0.002</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#space_distance_sec\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.space_distance_sec\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.time_dist_km\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">time_dist_km</code><span class=\"sig-paren\">(</span><em>sec1</em>, <em>sec2</em>, <em>km_per_sec=0.002</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#time_dist_km\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.time_dist_km\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.time_dist_sec\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">time_dist_sec</code><span class=\"sig-paren\">(</span><em>sec1</em>, <em>sec2</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#time_dist_sec\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.time_dist_sec\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.timespace_distance_km\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">timespace_distance_km</code><span class=\"sig-paren\">(</span><em>pt1</em>, <em>pt2</em>, <em>km_per_sec=0.002</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#timespace_distance_km\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.timespace_distance_km\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Computes distance between two points in space and time.\nTime is converted into spatial units using km_per_sec</p>\n<table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Parameters:</th><td class=\"field-body\"><ul class=\"first simple\">\n<li><strong>pt1</strong> (<em>tuple</em>) \u2013 (seconds, lat, lon)</li>\n<li><strong>pt2</strong> (<em>tuple</em>) \u2013 (seconds, lat, lon)</li>\n<li><strong>km_per_sec</strong> (<em>float</em>) \u2013 reasonable animal walking speed</li>\n</ul>\n</td>\n</tr>\n<tr class=\"field-even field\"><th class=\"field-name\">Returns:</th><td class=\"field-body\"><p class=\"first\">distance in kilometers</p>\n</td>\n</tr>\n<tr class=\"field-odd field\"><th class=\"field-name\">Return type:</th><td class=\"field-body\"><p class=\"first last\">float</p>\n</td>\n</tr>\n</tbody>\n</table>\n<dl class=\"docutils\">\n<dt>Doctest:</dt>\n<dd><div class=\"first last highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.occurrence_blackbox</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">scipy.spatial.distance</span> <span class=\"k\">as</span> <span class=\"nn\">spdist</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">functools</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">km_per_sec</span> <span class=\"o\">=</span> <span class=\"o\">.</span><span class=\"mi\">02</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">latlon1</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mf\">40.779299</span><span class=\"p\">,</span><span class=\"o\">-</span><span class=\"mf\">73.9719498</span><span class=\"p\">]</span> <span class=\"c1\"># museum of natural history</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">latlon2</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mf\">37.7336402</span><span class=\"p\">,</span><span class=\"o\">-</span><span class=\"mf\">122.5050342</span><span class=\"p\">]</span> <span class=\"c1\"># san fransisco zoo</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">pt1</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mf\">0.0</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"n\">latlon1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">pt2</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mf\">0.0</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"n\">latlon2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># google measures about 4138.88 kilometers</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">dist_km1</span> <span class=\"o\">=</span> <span class=\"n\">timespace_distance_km</span><span class=\"p\">(</span><span class=\"n\">pt1</span><span class=\"p\">,</span> <span class=\"n\">pt2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;dist_km1 = </span><span class=\"si\">{!r}</span><span class=\"s1\">&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">dist_km1</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Now add a time component</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">pt1</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mf\">360.0</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"n\">latlon1</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">pt2</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mf\">0.0</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"n\">latlon2</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">dist_km2</span> <span class=\"o\">=</span> <span class=\"n\">timespace_distance_km</span><span class=\"p\">(</span><span class=\"n\">pt1</span><span class=\"p\">,</span> <span class=\"n\">pt2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;dist_km2 = </span><span class=\"si\">{!r}</span><span class=\"s1\">&#39;</span><span class=\"o\">.</span><span class=\"n\">format</span><span class=\"p\">(</span><span class=\"n\">dist_km2</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">isclose</span><span class=\"p\">(</span><span class=\"n\">dist_km1</span><span class=\"p\">,</span> <span class=\"mf\">4136.4568647922624</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">isclose</span><span class=\"p\">(</span><span class=\"n\">dist_km2</span><span class=\"p\">,</span> <span class=\"mf\">4137.1768647922627</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.occurrence_blackbox.timespace_distance_sec\">\n<code class=\"descclassname\">ibeis.algo.preproc.occurrence_blackbox.</code><code class=\"descname\">timespace_distance_sec</code><span class=\"sig-paren\">(</span><em>pt1</em>, <em>pt2</em>, <em>km_per_sec=0.002</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/occurrence_blackbox/#timespace_distance_sec\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.occurrence_blackbox.timespace_distance_sec\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n</div>\n<div class=\"section\" id=\"module-ibeis.algo.preproc.preproc_annot\">\n<span id=\"ibeis-algo-preproc-preproc-annot-module\"></span><h2>ibeis.algo.preproc.preproc_annot module<a class=\"headerlink\" href=\"#module-ibeis.algo.preproc.preproc_annot\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>helpers for controller manual_annot_funcs</p>\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_annot.generate_annot_properties\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_annot.</code><code class=\"descname\">generate_annot_properties</code><span class=\"sig-paren\">(</span><em>ibs</em>, <em>gid_list</em>, <em>bbox_list=None</em>, <em>theta_list=None</em>, <em>species_list=None</em>, <em>nid_list=None</em>, <em>name_list=None</em>, <em>detect_confidence_list=None</em>, <em>notes_list=None</em>, <em>vert_list=None</em>, <em>annot_uuid_list=None</em>, <em>yaw_list=None</em>, <em>quiet_delete_thumbs=False</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_annot/#generate_annot_properties\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_annot.generate_annot_properties\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_annot.make_annotation_uuids\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_annot.</code><code class=\"descname\">make_annotation_uuids</code><span class=\"sig-paren\">(</span><em>image_uuid_list</em>, <em>bbox_list</em>, <em>theta_list</em>, <em>deterministic=True</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_annot/#make_annotation_uuids\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_annot.make_annotation_uuids\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_annot.postget_annot_verts\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_annot.</code><code class=\"descname\">postget_annot_verts</code><span class=\"sig-paren\">(</span><em>vertstr_list</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_annot/#postget_annot_verts\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_annot.postget_annot_verts\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_annot.testdata_preproc_annot\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_annot.</code><code class=\"descname\">testdata_preproc_annot</code><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_annot/#testdata_preproc_annot\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_annot.testdata_preproc_annot\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n</div>\n<div class=\"section\" id=\"module-ibeis.algo.preproc.preproc_image\">\n<span id=\"ibeis-algo-preproc-preproc-image-module\"></span><h2>ibeis.algo.preproc.preproc_image module<a class=\"headerlink\" href=\"#module-ibeis.algo.preproc.preproc_image\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_image.get_standard_ext\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_image.</code><code class=\"descname\">get_standard_ext</code><span class=\"sig-paren\">(</span><em>gpath</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_image/#get_standard_ext\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_image.get_standard_ext\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Returns standardized image extension</p>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_image.on_delete\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_image.</code><code class=\"descname\">on_delete</code><span class=\"sig-paren\">(</span><em>ibs</em>, <em>featweight_rowid_list</em>, <em>qreq_=None</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_image/#on_delete\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_image.on_delete\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_image.parse_exif\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_image.</code><code class=\"descname\">parse_exif</code><span class=\"sig-paren\">(</span><em>pil_img</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_image/#parse_exif\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_image.parse_exif\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Image EXIF helper</p>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_image.parse_imageinfo\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_image.</code><code class=\"descname\">parse_imageinfo</code><span class=\"sig-paren\">(</span><em>gpath</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_image/#parse_imageinfo\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_image.parse_imageinfo\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Worker function: gpath must be in UNIX-PATH format!</p>\n<table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Parameters:</th><td class=\"field-body\"><strong>gpath</strong> (<em>str</em>) \u2013 image path</td>\n</tr>\n<tr class=\"field-even field\"><th class=\"field-name\">Returns:</th><td class=\"field-body\"><dl class=\"docutils\">\n<dt>param_tup -</dt>\n<dd>if successful returns a tuple of image parameters which are values\nfor SQL columns on else returns None</dd>\n</dl>\n</td>\n</tr>\n<tr class=\"field-odd field\"><th class=\"field-name\">Return type:</th><td class=\"field-body\">tuple</td>\n</tr>\n</tbody>\n</table>\n<dl class=\"docutils\">\n<dt>CommandLine:</dt>\n<dd>python -m ibeis.algo.preproc.preproc_image \u2013exec-parse_imageinfo</dd>\n<dt>Doctest:</dt>\n<dd><div class=\"first last highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.preproc_image</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gpath</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">grab_test_imgpath</span><span class=\"p\">(</span><span class=\"s1\">&#39;patsy.jpg&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">param_tup</span> <span class=\"o\">=</span> <span class=\"n\">parse_imageinfo</span><span class=\"p\">(</span><span class=\"n\">gpath</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s1\">&#39;param_tup = </span><span class=\"si\">%s</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">param_tup</span><span class=\"p\">),))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">uuid</span> <span class=\"o\">=</span> <span class=\"n\">param_tup</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">uuid</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;16008058-788c-2d48-cd50-f6029f726cbf&#39;</span>\n</pre></div>\n</div>\n</dd>\n</dl>\n</dd></dl>\n\n</div>\n<div class=\"section\" id=\"module-ibeis.algo.preproc.preproc_occurrence\">\n<span id=\"ibeis-algo-preproc-preproc-occurrence-module\"></span><h2>ibeis.algo.preproc.preproc_occurrence module<a class=\"headerlink\" href=\"#module-ibeis.algo.preproc.preproc_occurrence\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.agglomerative_cluster_occurrences\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">agglomerative_cluster_occurrences</code><span class=\"sig-paren\">(</span><em>X_data</em>, <em>thresh_sec</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#agglomerative_cluster_occurrences\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.agglomerative_cluster_occurrences\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Agglomerative occurrence clustering algorithm</p>\n<table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Parameters:</th><td class=\"field-body\"><ul class=\"first simple\">\n<li><strong>X_data</strong> (<em>ndarray</em>) \u2013 Length N array of data to cluster</li>\n<li><strong>thresh_sec</strong> (<em>float</em>) \u2013 </li>\n</ul>\n</td>\n</tr>\n<tr class=\"field-even field\"><th class=\"field-name\">Returns:</th><td class=\"field-body\"><p class=\"first\">(label_arr) - Length N array of cluster indexes</p>\n</td>\n</tr>\n<tr class=\"field-odd field\"><th class=\"field-name\">Return type:</th><td class=\"field-body\"><p class=\"first last\">ndarray</p>\n</td>\n</tr>\n</tbody>\n</table>\n<dl class=\"docutils\">\n<dt>CommandLine:</dt>\n<dd>python -m ibeis.algo.preproc.preproc_occurrence \u2013exec-agglomerative_cluster_occurrences</dd>\n</dl>\n<p class=\"rubric\">References</p>\n<p><a class=\"reference external\" href=\"https://docs.scipy.org/doc/scipy-0.9.0/reference/generated/scipy.cluster.hierarchy.fclusterdata.html#scipy.cluster.hierarchy.fclusterdata\">https://docs.scipy.org/doc/scipy-0.9.0/reference/generated/scipy.cluster.hierarchy.fclusterdata.html#scipy.cluster.hierarchy.fclusterdata</a>\n<a class=\"reference external\" href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.cluster.hierarchy.fcluster.html\">http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.cluster.hierarchy.fcluster.html</a></p>\n<p class=\"rubric\">Example</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># DISABLE_DOCTEST</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.preproc_occurrence</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_data</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;?&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thresh_sec</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;?&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"p\">(</span><span class=\"n\">occur_ids</span><span class=\"p\">,</span> <span class=\"n\">occur_gids</span><span class=\"p\">)</span> <span class=\"o\">=</span> <span class=\"n\">agglomerative_cluster_occurrences</span><span class=\"p\">(</span><span class=\"n\">X_data</span><span class=\"p\">,</span> <span class=\"n\">thresh_sec</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s1\">&#39;(occur_ids, occur_gids) = </span><span class=\"si\">%s</span><span class=\"s1\">&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">((</span><span class=\"n\">occur_ids</span><span class=\"p\">,</span> <span class=\"n\">occur_gids</span><span class=\"p\">)),))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.cluster_timespace\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">cluster_timespace</code><span class=\"sig-paren\">(</span><em>X_data</em>, <em>thresh</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#cluster_timespace\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.cluster_timespace\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p class=\"rubric\">References</p>\n<dl class=\"docutils\">\n<dt><a class=\"reference external\" href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/\">http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/</a></dt>\n<dd>scipy.cluster.hierarchy.linkage.html</dd>\n<dt>CommandLine:</dt>\n<dd>python -m ibeis.algo.preproc.preproc_occurrence cluster_timespace \u2013show</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># DISABLE_DOCTEST</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.preproc_occurrence</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_data</span> <span class=\"o\">=</span> <span class=\"n\">testdata_gps</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">thresh</span> <span class=\"o\">=</span> <span class=\"mi\">10</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_labels</span> <span class=\"o\">=</span> <span class=\"n\">cluster_timespace</span><span class=\"p\">(</span><span class=\"n\">X_data</span><span class=\"p\">,</span> <span class=\"n\">thresh</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">fnum</span> <span class=\"o\">=</span> <span class=\"n\">pt</span><span class=\"o\">.</span><span class=\"n\">ensure_fnum</span><span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">fig</span> <span class=\"o\">=</span> <span class=\"n\">pt</span><span class=\"o\">.</span><span class=\"n\">figure</span><span class=\"p\">(</span><span class=\"n\">fnum</span><span class=\"o\">=</span><span class=\"n\">fnum</span><span class=\"p\">,</span> <span class=\"n\">doclf</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">docla</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">hier</span><span class=\"o\">.</span><span class=\"n\">dendrogram</span><span class=\"p\">(</span><span class=\"n\">linkage_mat</span><span class=\"p\">,</span> <span class=\"n\">orientation</span><span class=\"o\">=</span><span class=\"s1\">&#39;top&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">plot_annotaiton_gps</span><span class=\"p\">(</span><span class=\"n\">X_data</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">show_if_requested</span><span class=\"p\">()</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.compute_occurrence_groups\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">compute_occurrence_groups</code><span class=\"sig-paren\">(</span><em>ibs</em>, <em>gid_list</em>, <em>config={}</em>, <em>use_gps=False</em>, <em>verbose=None</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#compute_occurrence_groups\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.compute_occurrence_groups\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Parameters:</th><td class=\"field-body\"><ul class=\"first simple\">\n<li><strong>ibs</strong> (<a class=\"reference internal\" href=\"../ibeis.control/#ibeis.control.IBEISControl.IBEISController\" title=\"ibeis.control.IBEISControl.IBEISController\"><em>IBEISController</em></a>) \u2013 ibeis controller object</li>\n<li><strong>gid_list</strong> (<em>list</em>) \u2013 </li>\n</ul>\n</td>\n</tr>\n<tr class=\"field-even field\"><th class=\"field-name\">Returns:</th><td class=\"field-body\"><p class=\"first\">(None, None)</p>\n</td>\n</tr>\n<tr class=\"field-odd field\"><th class=\"field-name\">Return type:</th><td class=\"field-body\"><p class=\"first last\">tuple</p>\n</td>\n</tr>\n</tbody>\n</table>\n<dl class=\"docutils\">\n<dt>CommandLine:</dt>\n<dd>python -m ibeis compute_occurrence_groups</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># DISABLE_DOCTEST</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.preproc_occurrence</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">ibeis</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">ibs</span> <span class=\"o\">=</span> <span class=\"n\">ibeis</span><span class=\"o\">.</span><span class=\"n\">opendb</span><span class=\"p\">(</span><span class=\"n\">defaultdb</span><span class=\"o\">=</span><span class=\"s1\">&#39;testdb1&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">verbose</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">images</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">images</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gid_list</span> <span class=\"o\">=</span> <span class=\"n\">images</span><span class=\"o\">.</span><span class=\"n\">gids</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>  <span class=\"c1\"># ibeis.algo.Config.OccurrenceConfig().asdict()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">tup</span> <span class=\"o\">=</span> <span class=\"n\">ibeis_compute_occurr</span> <span class=\"n\">ences</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">gid_list</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"p\">(</span><span class=\"n\">flat_imgsetids</span><span class=\"p\">,</span> <span class=\"n\">flat_gids</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">aids_list</span> <span class=\"o\">=</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">group_items</span><span class=\"p\">(</span><span class=\"n\">aid_list_</span><span class=\"p\">,</span> <span class=\"n\">flat_imgsetids</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">values</span><span class=\"p\">())</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">metric</span> <span class=\"o\">=</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"nb\">map</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">,</span> <span class=\"n\">aids_list</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">sortx</span> <span class=\"o\">=</span> <span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">list_argsort</span><span class=\"p\">(</span><span class=\"n\">metric</span><span class=\"p\">)[::</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">index</span> <span class=\"o\">=</span> <span class=\"n\">sortx</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">aids</span> <span class=\"o\">=</span> <span class=\"n\">aids_list</span><span class=\"p\">[</span><span class=\"n\">index</span><span class=\"p\">]</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gids</span> <span class=\"o\">=</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"nb\">set</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">get_annot_gids</span><span class=\"p\">(</span><span class=\"n\">aids</span><span class=\"p\">)))</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.compute_occurrence_unixtime\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">compute_occurrence_unixtime</code><span class=\"sig-paren\">(</span><em>ibs</em>, <em>occur_gids</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#compute_occurrence_unixtime\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.compute_occurrence_unixtime\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.filter_and_relabel\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">filter_and_relabel</code><span class=\"sig-paren\">(</span><em>labels</em>, <em>label_gids</em>, <em>min_imgs_per_occurence</em>, <em>occur_unixtimes=None</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#filter_and_relabel\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.filter_and_relabel\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Removes clusters with too few members.\nRelabels clusters-labels such that label 0 has the most members</p>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.group_images_by_label\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">group_images_by_label</code><span class=\"sig-paren\">(</span><em>label_arr</em>, <em>gid_arr</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#group_images_by_label\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.group_images_by_label\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Input: Length N list of labels and ids\nOutput: Length M list of unique labels, and lenth M list of lists of ids</p>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.ibeis_compute_occurrences\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">ibeis_compute_occurrences</code><span class=\"sig-paren\">(</span><em>ibs</em>, <em>gid_list</em>, <em>config=None</em>, <em>verbose=None</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#ibeis_compute_occurrences\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.ibeis_compute_occurrences\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>clusters occurrences togethers (by time, not yet space)\nAn occurrence is a meeting, localized in time and space between a camera\nand a group of animals.\nAnimals are identified within each occurrence.</p>\n<p>Does not modify database state, just returns cluster ids</p>\n<table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Parameters:</th><td class=\"field-body\"><ul class=\"first simple\">\n<li><strong>ibs</strong> (<a class=\"reference internal\" href=\"../ibeis.control/#ibeis.control.IBEISControl.IBEISController\" title=\"ibeis.control.IBEISControl.IBEISController\"><em>IBEISController</em></a>) \u2013 ibeis controller object</li>\n<li><strong>gid_list</strong> (<em>list</em>) \u2013 </li>\n</ul>\n</td>\n</tr>\n<tr class=\"field-even field\"><th class=\"field-name\">Returns:</th><td class=\"field-body\"><p class=\"first\">(None, None)</p>\n</td>\n</tr>\n<tr class=\"field-odd field\"><th class=\"field-name\">Return type:</th><td class=\"field-body\"><p class=\"first last\">tuple</p>\n</td>\n</tr>\n</tbody>\n</table>\n<dl class=\"docutils\">\n<dt>CommandLine:</dt>\n<dd>python -m ibeis \u2013tf ibeis_compute_occurrences:0 \u2013show\nTODO: FIXME: good example of autogen doctest return failure</dd>\n</dl>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.meanshift_cluster_occurrences\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">meanshift_cluster_occurrences</code><span class=\"sig-paren\">(</span><em>X_data</em>, <em>quantile</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#meanshift_cluster_occurrences\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.meanshift_cluster_occurrences\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Meanshift occurrence clustering algorithm</p>\n<table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Parameters:</th><td class=\"field-body\"><ul class=\"first simple\">\n<li><strong>X_data</strong> (<em>ndarray</em>) \u2013 Length N array of data to cluster</li>\n<li><strong>quantile</strong> (<em>float</em>) \u2013 quantile should be between [0, 1].\neg: quantile=.5 represents the median of all pairwise distances</li>\n</ul>\n</td>\n</tr>\n<tr class=\"field-even field\"><th class=\"field-name\">Returns:</th><td class=\"field-body\"><p class=\"first\">Length N array of labels</p>\n</td>\n</tr>\n<tr class=\"field-odd field\"><th class=\"field-name\">Return type:</th><td class=\"field-body\"><p class=\"first last\">ndarray</p>\n</td>\n</tr>\n</tbody>\n</table>\n<dl class=\"docutils\">\n<dt>CommandLine:</dt>\n<dd>python -m ibeis.algo.preproc.preproc_occurrence \u2013exec-meanshift_cluster_occurrences</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># DISABLE_DOCTEST</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.preproc_occurrence</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">X_data</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;?&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">quantile</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;?&#39;</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">meanshift_cluster_occurrences</span><span class=\"p\">(</span><span class=\"n\">X_data</span><span class=\"p\">,</span> <span class=\"n\">quantile</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.plot_gps_html\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">plot_gps_html</code><span class=\"sig-paren\">(</span><em>gps_list</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#plot_gps_html\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.plot_gps_html\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Plots gps coordinates on a map projection</p>\n<dl class=\"docutils\">\n<dt>InstallBasemap:</dt>\n<dd><p class=\"first\">sudo apt-get install libgeos-dev\npip install git+https://github.com/matplotlib/basemap\nhttp://matplotlib.org/basemap/users/examples.html</p>\n<p>pip install gmplot</p>\n<p class=\"last\">sudo apt-get install netcdf-bin\nsudo apt-get install libnetcdf-dev\npip install netCDF4</p>\n</dd>\n<dt>Ignore:</dt>\n<dd>pip install git+git://github.com/myuser/foo.git&#64;v123</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.preproc_occurrence</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">ibeis</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">ibs</span> <span class=\"o\">=</span> <span class=\"n\">ibeis</span><span class=\"o\">.</span><span class=\"n\">opendb</span><span class=\"p\">(</span><span class=\"n\">defaultdb</span><span class=\"o\">=</span><span class=\"s1\">&#39;testdb1&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">images</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">images</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># Setup GPS points to draw</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">&#39;Setup GPS points&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gps_list_</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">(</span><span class=\"n\">images</span><span class=\"o\">.</span><span class=\"n\">gps2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">unixtime_list_</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">array</span><span class=\"p\">(</span><span class=\"n\">images</span><span class=\"o\">.</span><span class=\"n\">unixtime2</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">has_gps</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">all</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">logical_not</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">isnan</span><span class=\"p\">(</span><span class=\"n\">gps_list_</span><span class=\"p\">)),</span> <span class=\"n\">axis</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">has_unixtime</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">logical_not</span><span class=\"p\">(</span><span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">isnan</span><span class=\"p\">(</span><span class=\"n\">unixtime_list_</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">isvalid</span> <span class=\"o\">=</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">logical_and</span><span class=\"p\">(</span><span class=\"n\">has_gps</span><span class=\"p\">,</span> <span class=\"n\">has_unixtime</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gps_list</span> <span class=\"o\">=</span> <span class=\"n\">gps_list_</span><span class=\"o\">.</span><span class=\"n\">compress</span><span class=\"p\">(</span><span class=\"n\">isvalid</span><span class=\"p\">,</span> <span class=\"n\">axis</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">unixtime_list</span> <span class=\"o\">=</span> <span class=\"n\">unixtime_list_</span><span class=\"o\">.</span><span class=\"n\">compress</span><span class=\"p\">(</span><span class=\"n\">isvalid</span><span class=\"p\">)</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">plot_image_gps</span><span class=\"p\">(</span><span class=\"n\">gps_list</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.prepare_X_data\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">prepare_X_data</code><span class=\"sig-paren\">(</span><em>ibs</em>, <em>gid_list</em>, <em>use_gps=True</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#prepare_X_data\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.prepare_X_data\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Splits data into groups with/without gps and time</p>\n<p class=\"rubric\">Example</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># ENABLE_DOCTEST</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">from</span> <span class=\"nn\">ibeis.algo.preproc.preproc_occurrence</span> <span class=\"k\">import</span> <span class=\"o\">*</span>  <span class=\"c1\"># NOQA</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"kn\">import</span> <span class=\"nn\">ibeis</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">ibs</span> <span class=\"o\">=</span> <span class=\"n\">ibeis</span><span class=\"o\">.</span><span class=\"n\">opendb</span><span class=\"p\">(</span><span class=\"n\">defaultdb</span><span class=\"o\">=</span><span class=\"s1\">&#39;testdb1&#39;</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">images</span> <span class=\"o\">=</span> <span class=\"n\">ibs</span><span class=\"o\">.</span><span class=\"n\">images</span><span class=\"p\">()</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"c1\"># ibeis.control.accessor_decors.DEBUG_GETTERS = True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">use_gps</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">gid_list</span> <span class=\"o\">=</span> <span class=\"n\">images</span><span class=\"o\">.</span><span class=\"n\">gids</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"n\">datas</span> <span class=\"o\">=</span> <span class=\"n\">prepare_X_data</span><span class=\"p\">(</span><span class=\"n\">ibs</span><span class=\"p\">,</span> <span class=\"n\">gid_list</span><span class=\"p\">,</span> <span class=\"n\">use_gps</span><span class=\"p\">)</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">ut</span><span class=\"o\">.</span><span class=\"n\">repr2</span><span class=\"p\">(</span><span class=\"n\">datas</span><span class=\"p\">,</span> <span class=\"n\">nl</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">precision</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">datas</span><span class=\"p\">[</span><span class=\"s1\">&#39;both&#39;</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">])</span> <span class=\"o\">==</span> <span class=\"mi\">12</span>\n<span class=\"gp\">&gt;&gt;&gt; </span><span class=\"k\">assert</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">datas</span><span class=\"p\">[</span><span class=\"s1\">&#39;neither&#39;</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">])</span> <span class=\"o\">==</span> <span class=\"mi\">0</span>\n</pre></div>\n</div>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.testdata_gps\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">testdata_gps</code><span class=\"sig-paren\">(</span><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#testdata_gps\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.testdata_gps\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Simple data to test GPS algorithm.</p>\n<table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Returns:</th><td class=\"field-body\">Nx1 matrix denoting groundtruth locations\nX_data (ndarray): Nx3 matrix where each columns are (time, lat, lon)</td>\n</tr>\n<tr class=\"field-even field\"><th class=\"field-name\">Return type:</th><td class=\"field-body\">X_name (ndarray)</td>\n</tr>\n</tbody>\n</table>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.timespace_distance\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">timespace_distance</code><span class=\"sig-paren\">(</span><em>pt1</em>, <em>pt2</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#timespace_distance\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.timespace_distance\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_occurrence.timespace_pdist\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_occurrence.</code><code class=\"descname\">timespace_pdist</code><span class=\"sig-paren\">(</span><em>X_data</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_occurrence/#timespace_pdist\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_occurrence.timespace_pdist\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n</div>\n<div class=\"section\" id=\"module-ibeis.algo.preproc.preproc_residual\">\n<span id=\"ibeis-algo-preproc-preproc-residual-module\"></span><h2>ibeis.algo.preproc.preproc_residual module<a class=\"headerlink\" href=\"#module-ibeis.algo.preproc.preproc_residual\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_residual.add_residual_params_gen\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_residual.</code><code class=\"descname\">add_residual_params_gen</code><span class=\"sig-paren\">(</span><em>ibs</em>, <em>fid_list</em>, <em>qreq_=None</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_residual/#add_residual_params_gen\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_residual.add_residual_params_gen\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_residual.on_delete\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_residual.</code><code class=\"descname\">on_delete</code><span class=\"sig-paren\">(</span><em>ibs</em>, <em>featweight_rowid_list</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_residual/#on_delete\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_residual.on_delete\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n</div>\n<div class=\"section\" id=\"module-ibeis.algo.preproc.preproc_rvec\">\n<span id=\"ibeis-algo-preproc-preproc-rvec-module\"></span><h2>ibeis.algo.preproc.preproc_rvec module<a class=\"headerlink\" href=\"#module-ibeis.algo.preproc.preproc_rvec\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_rvec.add_rvecs_params_gen\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_rvec.</code><code class=\"descname\">add_rvecs_params_gen</code><span class=\"sig-paren\">(</span><em>ibs</em>, <em>nInput=None</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_rvec/#add_rvecs_params_gen\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_rvec.add_rvecs_params_gen\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.preproc_rvec.generate_rvecs\">\n<code class=\"descclassname\">ibeis.algo.preproc.preproc_rvec.</code><code class=\"descname\">generate_rvecs</code><span class=\"sig-paren\">(</span><em>vecs_list</em>, <em>words</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/preproc_rvec/#generate_rvecs\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.preproc_rvec.generate_rvecs\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd></dd></dl>\n\n</div>\n<div class=\"section\" id=\"module-ibeis.algo.preproc\">\n<span id=\"module-contents\"></span><h2>Module contents<a class=\"headerlink\" href=\"#module-ibeis.algo.preproc\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<dl class=\"data\">\n<dt id=\"ibeis.algo.preproc.IMPORT_TUPLES\">\n<code class=\"descclassname\">ibeis.algo.preproc.</code><code class=\"descname\">IMPORT_TUPLES</code><em class=\"property\"> = [('preproc_annot', None), ('preproc_image', None), ('preproc_occurrence', None), ('preproc_residual', None), ('preproc_rvec', None)]</em><a class=\"headerlink\" href=\"#ibeis.algo.preproc.IMPORT_TUPLES\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>cd /home/joncrall/code/ibeis/ibeis/algo/preproc\nmakeinit.py \u2013modname=ibeis.algo.preproc \u2013write</p>\n<table class=\"docutils field-list\" frame=\"void\" rules=\"none\">\n<col class=\"field-name\" />\n<col class=\"field-body\" />\n<tbody valign=\"top\">\n<tr class=\"field-odd field\"><th class=\"field-name\">Type:</th><td class=\"field-body\">Regen Command</td>\n</tr>\n</tbody>\n</table>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.reassign_submodule_attributes\">\n<code class=\"descclassname\">ibeis.algo.preproc.</code><code class=\"descname\">reassign_submodule_attributes</code><span class=\"sig-paren\">(</span><em>verbose=True</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/#reassign_submodule_attributes\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.reassign_submodule_attributes\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>why reloading all the modules doesnt do this I don\u2019t know</p>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.reload_subs\">\n<code class=\"descclassname\">ibeis.algo.preproc.</code><code class=\"descname\">reload_subs</code><span class=\"sig-paren\">(</span><em>verbose=True</em><span class=\"sig-paren\">)</span><a class=\"reference internal\" href=\"../_modules/ibeis/algo/preproc/#reload_subs\"><span class=\"viewcode-link\">[source]</span></a><a class=\"headerlink\" href=\"#ibeis.algo.preproc.reload_subs\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Reloads ibeis.algo.preproc and submodules</p>\n</dd></dl>\n\n<dl class=\"function\">\n<dt id=\"ibeis.algo.preproc.rrrr\">\n<code class=\"descclassname\">ibeis.algo.preproc.</code><code class=\"descname\">rrrr</code><span class=\"sig-paren\">(</span><em>verbose=True</em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#ibeis.algo.preproc.rrrr\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Reloads ibeis.algo.preproc and submodules</p>\n</dd></dl>\n\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["ibeis.algo.smk", "ibeis.algo.smk package", "N", "next"], ["ibeis.algo.hots", "ibeis.algo.hots package", "P", "previous"]], "sourcename": "ibeis.algo.preproc.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">ibeis.algo.preproc package</a><ul>\n<li><a class=\"reference internal\" href=\"#submodules\">Submodules</a></li>\n<li><a class=\"reference internal\" href=\"#module-ibeis.algo.preproc.occurrence_blackbox\">ibeis.algo.preproc.occurrence_blackbox module</a></li>\n<li><a class=\"reference internal\" href=\"#module-ibeis.algo.preproc.preproc_annot\">ibeis.algo.preproc.preproc_annot module</a></li>\n<li><a class=\"reference internal\" href=\"#module-ibeis.algo.preproc.preproc_image\">ibeis.algo.preproc.preproc_image module</a></li>\n<li><a class=\"reference internal\" href=\"#module-ibeis.algo.preproc.preproc_occurrence\">ibeis.algo.preproc.preproc_occurrence module</a></li>\n<li><a class=\"reference internal\" href=\"#module-ibeis.algo.preproc.preproc_residual\">ibeis.algo.preproc.preproc_residual module</a></li>\n<li><a class=\"reference internal\" href=\"#module-ibeis.algo.preproc.preproc_rvec\">ibeis.algo.preproc.preproc_rvec module</a></li>\n<li><a class=\"reference internal\" href=\"#module-ibeis.algo.preproc\">Module contents</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".rst", "current_page_name": "ibeis.algo.preproc", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}